/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ingest/route";
exports.ids = ["app/api/ingest/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?4c03":
/*!***********************!*\
  !*** debug (ignored) ***!
  \***********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fingest%2Froute&page=%2Fapi%2Fingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fingest%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fingest%2Froute&page=%2Fapi%2Fingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fingest%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_src_app_api_ingest_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ingest/route.ts */ \"(rsc)/./src/app/api/ingest/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ingest/route\",\n        pathname: \"/api/ingest\",\n        filename: \"route\",\n        bundlePath: \"app/api/ingest/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/src/app/api/ingest/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_src_app_api_ingest_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ingest/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbmdlc3QlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmluZ2VzdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmluZ2VzdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BoZW5vbWVueS1yZXZpZXcvP2QxNDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9zcmMvYXBwL2FwaS9pbmdlc3Qvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9pbmdlc3Qvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9pbmdlc3RcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2luZ2VzdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3J1bm5lci93b3Jrc3BhY2Uvc3JjL2FwcC9hcGkvaW5nZXN0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9pbmdlc3Qvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fingest%2Froute&page=%2Fapi%2Fingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fingest%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/ingest/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/ingest/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_anthropic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/anthropic */ \"(rsc)/./src/lib/anthropic.ts\");\n\n\n\nconst SYSTEM_PROMPT = `\nYou are an intelligence analysis engine.\n\nRewrite the provided article into a neutral, analytical intelligence brief.\n\nRemove marketing tone.\nNo hype.\nTechnical significance.\nGeopolitical impact.\n\nSelect category strictly from:\n\nAI\nAI Governance\nAI Operations\nQuantum\nSpace\nBiotech\nIndia–China\nUSA Europe\nIntelligence Brief\n\nExtract only clearly mentioned entities from the article.\nDo not hallucinate entities.\nMaximum 8 entities.\nIf none are clearly mentioned, return an empty array.\n\nReturn STRICT JSON ONLY:\n\n{\n  \"title\": \"\",\n  \"content\": \"\",\n  \"summary\": \"\",\n  \"category\": \"\",\n  \"entities\": [\n    { \"name\": \"\", \"type\": \"company | model | country | lab | regulator\" }\n  ],\n  \"timeline_event\": {\n    \"entity\": \"\",\n    \"date\": \"\",\n    \"title\": \"\",\n    \"description\": \"\",\n    \"event_type\": \"release | upgrade | security | regulation | funding | partnership | leadership | research | infrastructure | other\"\n  }\n}\n\nYou MUST always return event_type in timeline_event.\nDo NOT invent new labels.\nChoose the closest match from the allowed values.\nIf uncertain, use \"other\".\n\nevent_type MUST be one of:\n- release → new product or model launch\n- upgrade → major version improvement\n- security → breach, vulnerability, or data issue\n- regulation → government action or policy\n- funding → investment or financial event\n- partnership → collaboration between entities\n- leadership → CEO change or executive shift\n- research → published breakthrough or paper\n- infrastructure → data centers, compute expansion\n- other → none of the above\n\nIf no timeline_event exists, set timeline_event to null.\nNo markdown.\nNo commentary.\nOnly valid JSON.\n`;\nfunction checkAuth(request) {\n    const adminAuth = request.cookies.get(\"admin-auth\")?.value;\n    const adminSecret = process.env.ADMIN_SECRET;\n    return !!adminSecret && adminAuth === adminSecret;\n}\nfunction generateSlug(title) {\n    return title.toLowerCase().trim().replace(/[^a-z0-9\\s-]/g, \"\").replace(/\\s+/g, \"-\").replace(/-+/g, \"-\").replace(/^-|-$/g, \"\").slice(0, 80);\n}\nasync function getUniqueSlug(baseSlug) {\n    const { data } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"articles\").select(\"slug\").like(\"slug\", `${baseSlug}%`);\n    if (!data || data.length === 0) return baseSlug;\n    const existing = new Set(data.map((row)=>row.slug));\n    if (!existing.has(baseSlug)) return baseSlug;\n    let counter = 2;\n    while(existing.has(`${baseSlug}-${counter}`))counter++;\n    return `${baseSlug}-${counter}`;\n}\nfunction stripHtml(html) {\n    let text = html;\n    text = text.replace(/<script[\\s\\S]*?<\\/script>/gi, \"\");\n    text = text.replace(/<style[\\s\\S]*?<\\/style>/gi, \"\");\n    text = text.replace(/<nav[\\s\\S]*?<\\/nav>/gi, \"\");\n    text = text.replace(/<footer[\\s\\S]*?<\\/footer>/gi, \"\");\n    text = text.replace(/<header[\\s\\S]*?<\\/header>/gi, \"\");\n    text = text.replace(/<aside[\\s\\S]*?<\\/aside>/gi, \"\");\n    text = text.replace(/<iframe[\\s\\S]*?<\\/iframe>/gi, \"\");\n    text = text.replace(/<noscript[\\s\\S]*?<\\/noscript>/gi, \"\");\n    text = text.replace(/<[^>]+>/g, \" \");\n    text = text.replace(/&nbsp;/g, \" \");\n    text = text.replace(/&amp;/g, \"&\");\n    text = text.replace(/&lt;/g, \"<\");\n    text = text.replace(/&gt;/g, \">\");\n    text = text.replace(/&quot;/g, '\"');\n    text = text.replace(/&#39;/g, \"'\");\n    text = text.replace(/\\s+/g, \" \");\n    return text.trim();\n}\nasync function logIngestion(source_url, status, startTime, error_message) {\n    try {\n        await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"ingestion_logs\").insert({\n            source_url,\n            status,\n            processing_time_ms: Date.now() - startTime,\n            ...error_message ? {\n                error_message\n            } : {}\n        });\n        console.log(\"[ingest] Logged:\", status);\n    } catch (e) {\n        console.error(\"[ingest] Failed to write ingestion log:\", e);\n    }\n}\nasync function POST(request) {\n    const startTime = Date.now();\n    try {\n        if (!checkAuth(request)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized.\"\n            }, {\n                status: 401\n            });\n        }\n        let body;\n        try {\n            body = await request.json();\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid JSON body.\"\n            }, {\n                status: 400\n            });\n        }\n        const { url } = body;\n        if (!url || typeof url !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"url is required.\"\n            }, {\n                status: 400\n            });\n        }\n        try {\n            new URL(url);\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid URL format.\"\n            }, {\n                status: 400\n            });\n        }\n        const { data: existing } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"articles\").select(\"id, title\").eq(\"source_url\", url).limit(1);\n        if (existing && existing.length > 0) {\n            await logIngestion(url, \"duplicate\", startTime);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `Already ingested: \"${existing[0].title}\"`,\n                duplicate: true,\n                existing_id: existing[0].id\n            }, {\n                status: 409\n            });\n        }\n        let fetchRes;\n        const fetchStart = Date.now();\n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), 10000);\n            fetchRes = await fetch(url, {\n                headers: {\n                    \"User-Agent\": \"Mozilla/5.0 (compatible; PhenomenyBot/1.0)\",\n                    \"Accept\": \"text/html,application/xhtml+xml\"\n                },\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n        } catch (err) {\n            const fetchDuration = Date.now() - fetchStart;\n            console.log(\"[ingest] Fetch time:\", fetchDuration);\n            if (err.name === \"AbortError\") {\n                await logIngestion(url, \"fetch_error\", startTime, \"Request timed out after 10s\");\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Request timed out.\"\n                }, {\n                    status: 408\n                });\n            }\n            await logIngestion(url, \"fetch_error\", startTime, err.message);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `Failed to fetch URL: ${err.message}`\n            }, {\n                status: 400\n            });\n        }\n        const fetchDuration = Date.now() - fetchStart;\n        console.log(\"[ingest] Fetch time:\", fetchDuration);\n        if (!fetchRes.ok) {\n            const errMsg = `URL returned ${fetchRes.status} ${fetchRes.statusText}`;\n            await logIngestion(url, \"fetch_error\", startTime, errMsg);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: errMsg\n            }, {\n                status: 400\n            });\n        }\n        const contentType = fetchRes.headers.get(\"content-type\") || \"\";\n        if (!contentType.includes(\"text/html\")) {\n            await logIngestion(url, \"fetch_error\", startTime, `Unsupported content type: ${contentType}`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unsupported content type\"\n            }, {\n                status: 400\n            });\n        }\n        const html = await fetchRes.text();\n        let cleanedText = stripHtml(html);\n        if (cleanedText.length > 15000) {\n            cleanedText = cleanedText.slice(0, 15000);\n            console.warn(\"[ingest] Content truncated\");\n        }\n        if (cleanedText.length < 100) {\n            await logIngestion(url, \"fetch_error\", startTime, \"Extracted text too short\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Extracted text too short — possibly paywalled or empty page.\"\n            }, {\n                status: 422\n            });\n        }\n        if (!_lib_anthropic__WEBPACK_IMPORTED_MODULE_2__.ANTHROPIC_API_KEY) {\n            await logIngestion(url, \"ai_validation_error\", startTime, \"ANTHROPIC_API_KEY not configured\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"ANTHROPIC_API_KEY is not configured.\"\n            }, {\n                status: 500\n            });\n        }\n        let aiRaw;\n        try {\n            const response = await _lib_anthropic__WEBPACK_IMPORTED_MODULE_2__.anthropicClient.post(\"/messages\", {\n                model: \"claude-sonnet-4-20250514\",\n                max_tokens: 2000,\n                system: SYSTEM_PROMPT,\n                messages: [\n                    {\n                        role: \"user\",\n                        content: cleanedText\n                    }\n                ]\n            });\n            aiRaw = response.data?.content?.[0]?.text;\n            if (!aiRaw) {\n                await logIngestion(url, \"ai_validation_error\", startTime, \"Empty response from Anthropic\");\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Empty response from Anthropic.\"\n                }, {\n                    status: 500\n                });\n            }\n        } catch (err) {\n            const msg = err.response?.data?.error?.message || err.message || \"Unknown Anthropic error\";\n            await logIngestion(url, \"ai_validation_error\", startTime, msg);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `AI request failed: ${msg}`\n            }, {\n                status: 500\n            });\n        }\n        let parsed;\n        try {\n            const cleaned = aiRaw.replace(/```json\\s*/g, \"\").replace(/```\\s*/g, \"\").trim();\n            parsed = JSON.parse(cleaned);\n        } catch  {\n            await logIngestion(url, \"ai_validation_error\", startTime, \"Failed to parse AI response as JSON\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Failed to parse AI response as JSON.\"\n            }, {\n                status: 500\n            });\n        }\n        if (!parsed.title || !parsed.content) {\n            await logIngestion(url, \"ai_validation_error\", startTime, \"AI response missing required title or content\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"AI response missing required title or content.\"\n            }, {\n                status: 500\n            });\n        }\n        const baseSlug = generateSlug(parsed.title);\n        const slug = await getUniqueSlug(baseSlug);\n        const articleInsert = {\n            title: parsed.title,\n            content: parsed.content,\n            slug,\n            status: \"published\",\n            publish_at: new Date().toISOString(),\n            source_url: url\n        };\n        console.log(\"[ingest] Inserting article (category omitted to isolate schema cache issue)\");\n        const { data: articleData, error: articleError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"articles\").insert(articleInsert).select(\"id\").single();\n        if (articleError) {\n            console.error(\"[ingest] Article insert error:\", JSON.stringify(articleError, null, 2));\n            await logIngestion(url, \"insert_error\", startTime, articleError.message);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `Article insert failed: ${articleError.message}`\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"[ingest] Article inserted successfully, id:\", articleData.id);\n        const ALLOWED_ENTITY_TYPES = [\n            \"company\",\n            \"model\",\n            \"country\",\n            \"lab\",\n            \"regulator\",\n            \"person\",\n            \"institution\",\n            \"event\"\n        ];\n        const GENERIC_ENTITY_BLOCKLIST = [\n            \"ai\",\n            \"artificial intelligence\",\n            \"technology\",\n            \"tech\",\n            \"industry\",\n            \"government\",\n            \"company\",\n            \"corporation\",\n            \"startup\",\n            \"platform\",\n            \"system\",\n            \"model\",\n            \"research\",\n            \"institute\"\n        ];\n        const AI_CATEGORIES = [\n            \"AI\",\n            \"AI Governance\",\n            \"AI Operations\"\n        ];\n        const AI_KEYWORDS = /\\b(ai|artificial intelligence|model|research|regulation)\\b/i;\n        const EVENT_KEYWORDS = /\\b(ai|summit|expo|conference)\\b/i;\n        const INSTITUTION_KEYWORDS = /\\b(university|institute|lab|research)\\b/i;\n        const REJECTED_PATTERNS = /\\b(party|parties|wing|wings|venue|arena|stadium|hall|center|centre|convention center)\\b/i;\n        function passesContextualFilter(entity, articleCategory, articleContent) {\n            const nameLower = entity.name.trim().toLowerCase();\n            if (REJECTED_PATTERNS.test(nameLower)) {\n                return false;\n            }\n            if (entity.type === \"person\") {\n                if (!AI_CATEGORIES.includes(articleCategory)) return false;\n                if (!AI_KEYWORDS.test(articleContent)) return false;\n            }\n            if (entity.type === \"event\") {\n                if (!EVENT_KEYWORDS.test(nameLower)) return false;\n            }\n            if (entity.type === \"institution\") {\n                if (!INSTITUTION_KEYWORDS.test(nameLower)) return false;\n            }\n            return true;\n        }\n        const CORPORATE_SUFFIXES = /\\s+(Inc\\.?|Corporation|Corp\\.?|Ltd\\.?|LLC|Plc|PLC)$/i;\n        function normalizeEntityName(raw) {\n            let name = raw.trim();\n            name = name.toLowerCase().replace(/\\b\\w/g, (c)=>c.toUpperCase());\n            name = name.replace(CORPORATE_SUFFIXES, \"\");\n            name = name.replace(/[,.\\s]+$/, \"\");\n            name = name.replace(/\\s+/g, \" \").trim();\n            return name;\n        }\n        let firstCompanyId = null;\n        const modelEntityIds = [];\n        if (parsed.entities && Array.isArray(parsed.entities) && parsed.entities.length > 0) {\n            for (const entity of parsed.entities){\n                if (!entity.name || typeof entity.name !== \"string\" || !entity.name.trim()) {\n                    console.warn(\"[ingest] Entity rejected:\", entity.name);\n                    continue;\n                }\n                if (!entity.type || !ALLOWED_ENTITY_TYPES.includes(entity.type)) {\n                    console.warn(\"[ingest] Entity rejected:\", entity.name);\n                    continue;\n                }\n                if (entity.name.trim().length < 2) {\n                    console.warn(\"[ingest] Entity rejected:\", entity.name);\n                    continue;\n                }\n                if (/^\\d+$/.test(entity.name.trim())) {\n                    console.warn(\"[ingest] Entity rejected:\", entity.name);\n                    continue;\n                }\n                if (GENERIC_ENTITY_BLOCKLIST.includes(entity.name.trim().toLowerCase())) {\n                    console.warn(\"[ingest] Entity rejected:\", entity.name);\n                    continue;\n                }\n                if (!passesContextualFilter(entity, parsed.category || \"\", parsed.content || \"\")) {\n                    console.warn(\"[ingest] Rejected contextual entity:\", entity.name);\n                    continue;\n                }\n                const entityName = normalizeEntityName(entity.name);\n                console.log(\"[ingest] Normalized entity:\", entityName);\n                if (!entityName) continue;\n                const entitySlug = entityName.toLowerCase().trim().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\").replace(/-+/g, \"-\").replace(/^-|-$/g, \"\");\n                const { data: existingEntity } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entities\").select(\"id\").eq(\"slug\", entitySlug).limit(1).single();\n                let entityId;\n                if (existingEntity) {\n                    entityId = existingEntity.id;\n                } else {\n                    const { data: newEntity, error: insertEntityError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entities\").insert({\n                        name: entityName,\n                        slug: entitySlug,\n                        type: entity.type\n                    }).select(\"id\").single();\n                    if (insertEntityError || !newEntity) {\n                        console.error(\"[ingest] Entity insert failed:\", entityName, insertEntityError?.message);\n                        continue;\n                    }\n                    entityId = newEntity.id;\n                }\n                if (entity.type === \"model\") {\n                    modelEntityIds.push(entityId);\n                }\n                if (entity.type === \"company\" && !firstCompanyId) {\n                    firstCompanyId = entityId;\n                }\n                const { error: linkError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"article_entities\").upsert({\n                    article_id: articleData.id,\n                    entity_id: entityId\n                }, {\n                    onConflict: \"article_id,entity_id\"\n                });\n                if (linkError) {\n                    console.error(\"[ingest] Entity link failed:\", entityName, linkError.message);\n                } else {\n                    console.log(\"[ingest] Linked entity:\", entityName);\n                }\n            }\n            if (firstCompanyId && modelEntityIds.length > 0) {\n                console.log(\"[ingest] Linking models to company:\", firstCompanyId);\n                console.log(\"[ingest] Model IDs:\", modelEntityIds);\n                const { data: updateResult, error: parentError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entities\").update({\n                    parent_id: firstCompanyId\n                }).in(\"id\", modelEntityIds).is(\"parent_id\", null).select();\n                console.log(\"[ingest] Link result:\", JSON.stringify(updateResult));\n                if (parentError) {\n                    console.error(\"[ingest] Parent link failed:\", parentError.message);\n                } else {\n                    console.log(`[ingest] Parent linkage complete: ${updateResult?.length || 0} models linked`);\n                }\n            }\n            for (const modelId of modelEntityIds){\n                const { data: existingTimeline } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"timelines\").select(\"id\").eq(\"entity\", modelId).limit(1);\n                if (!existingTimeline || existingTimeline.length === 0) {\n                    const { error: fallbackError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"timelines\").insert({\n                        entity: modelId,\n                        event_type: \"first_appearance\",\n                        event_date: new Date().toISOString(),\n                        title: \"First appearance in repository\",\n                        description: parsed.title || \"\"\n                    });\n                    if (fallbackError) {\n                        console.error(\"[ingest] Fallback timeline insert failed for model\", modelId, fallbackError.message);\n                    } else {\n                        console.log(\"[ingest] Fallback timeline created for model:\", modelId);\n                    }\n                }\n            }\n        }\n        if (parsed.entities && Array.isArray(parsed.entities) && parsed.entities.length > 0) {\n            for (const entity of parsed.entities){\n                const entityName = normalizeEntityName(entity.name || \"\");\n                if (!entityName) continue;\n                const entitySlug = entityName.toLowerCase().trim().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\").replace(/-+/g, \"-\").replace(/^-|-$/g, \"\");\n                const { data: existingEnt } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entities\").select(\"id, summary\").eq(\"slug\", entitySlug).limit(1).single();\n                if (existingEnt && !existingEnt.summary) {\n                    try {\n                        const summaryResponse = await _lib_anthropic__WEBPACK_IMPORTED_MODULE_2__.anthropicClient.post(\"/messages\", {\n                            model: \"claude-sonnet-4-20250514\",\n                            max_tokens: 600,\n                            system: `You are a concise encyclopedia writer. Write a 200–300 word structured summary about the given entity. Cover: what it is, its significance in the AI/tech landscape, key products or contributions, and notable milestones. Use neutral, analytical tone. No markdown. No headers. Plain text only.`,\n                            messages: [\n                                {\n                                    role: \"user\",\n                                    content: `Write a 200–300 word summary about: ${entityName} (type: ${entity.type})`\n                                }\n                            ]\n                        });\n                        const summaryText = summaryResponse.data?.content?.[0]?.text;\n                        if (summaryText && summaryText.trim().length > 50) {\n                            const { error: summaryUpdateError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entities\").update({\n                                summary: summaryText.trim()\n                            }).eq(\"id\", existingEnt.id).is(\"summary\", null);\n                            if (summaryUpdateError) {\n                                console.error(\"[ingest] Summary update failed for\", entityName, summaryUpdateError.message);\n                            } else {\n                                console.log(\"[ingest] Summary generated for:\", entityName);\n                            }\n                        }\n                    } catch (summaryErr) {\n                        console.error(\"[ingest] Summary generation failed for\", entityName, summaryErr.message);\n                    }\n                }\n            }\n        }\n        const ALLOWED_PREDICATES = [\n            \"partnered_with\",\n            \"acquired\",\n            \"invested_in\",\n            \"competes_with\",\n            \"developed\",\n            \"regulates\",\n            \"funded_by\",\n            \"subsidiary_of\",\n            \"spun_off\",\n            \"collaborated_with\",\n            \"supplies_to\",\n            \"licensed_from\"\n        ];\n        if (parsed.entities && Array.isArray(parsed.entities) && parsed.entities.length >= 2) {\n            const entityNames = parsed.entities.map((e)=>normalizeEntityName(e.name || \"\")).filter(Boolean);\n            if (entityNames.length >= 2) {\n                try {\n                    const relPrompt = `From the following article text and list of entities, extract relationships between entities.\n\nEntities: ${entityNames.join(\", \")}\n\nAllowed predicates (use ONLY these):\n${ALLOWED_PREDICATES.join(\", \")}\n\nReturn STRICT JSON array only. No markdown. No commentary.\nEach element: {\"subject\": \"\", \"predicate\": \"\", \"object\": \"\", \"confidence\": 0.0}\n\nRules:\n- subject and object MUST be from the entity list above\n- predicate MUST be from the allowed list\n- confidence between 0.0 and 1.0\n- If no relationships exist, return []\n\nArticle text:\n${parsed.content.slice(0, 3000)}`;\n                    const relResponse = await _lib_anthropic__WEBPACK_IMPORTED_MODULE_2__.anthropicClient.post(\"/messages\", {\n                        model: \"claude-sonnet-4-20250514\",\n                        max_tokens: 800,\n                        system: \"You extract entity relationships from text. Return only valid JSON arrays. No markdown.\",\n                        messages: [\n                            {\n                                role: \"user\",\n                                content: relPrompt\n                            }\n                        ]\n                    });\n                    const relRaw = relResponse.data?.content?.[0]?.text;\n                    if (relRaw) {\n                        const cleaned = relRaw.replace(/```json\\s*/g, \"\").replace(/```\\s*/g, \"\").trim();\n                        const relationships = JSON.parse(cleaned);\n                        if (Array.isArray(relationships)) {\n                            for (const rel of relationships){\n                                if (!rel.subject || !rel.predicate || !rel.object) continue;\n                                if (!ALLOWED_PREDICATES.includes(rel.predicate)) continue;\n                                const subjectName = normalizeEntityName(rel.subject);\n                                const objectName = normalizeEntityName(rel.object);\n                                if (!subjectName || !objectName) continue;\n                                const subjectSlug = subjectName.toLowerCase().trim().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\").replace(/-+/g, \"-\").replace(/^-|-$/g, \"\");\n                                const objectSlug = objectName.toLowerCase().trim().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\").replace(/-+/g, \"-\").replace(/^-|-$/g, \"\");\n                                const [subjectRes, objectRes] = await Promise.all([\n                                    _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entities\").select(\"id\").eq(\"slug\", subjectSlug).limit(1).single(),\n                                    _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entities\").select(\"id\").eq(\"slug\", objectSlug).limit(1).single()\n                                ]);\n                                if (!subjectRes.data || !objectRes.data) {\n                                    console.warn(\"[ingest] Relationship entity not found:\", subjectName, \"or\", objectName);\n                                    continue;\n                                }\n                                const subjectId = subjectRes.data.id;\n                                const objectId = objectRes.data.id;\n                                const confidence = typeof rel.confidence === \"number\" ? Math.min(1, Math.max(0, rel.confidence)) : 0.7;\n                                const { data: existingRel } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entity_relationships\").select(\"id\").eq(\"subject_id\", subjectId).eq(\"object_id\", objectId).eq(\"predicate\", rel.predicate).eq(\"source_url\", url).limit(1);\n                                if (existingRel && existingRel.length > 0) {\n                                    console.log(\"[ingest] Relationship already exists:\", subjectName, rel.predicate, objectName);\n                                    continue;\n                                }\n                                const { error: relInsertError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entity_relationships\").insert({\n                                    subject_id: subjectId,\n                                    object_id: objectId,\n                                    predicate: rel.predicate,\n                                    source_url: url,\n                                    confidence\n                                });\n                                if (relInsertError) {\n                                    console.error(\"[ingest] Relationship insert failed:\", relInsertError.message);\n                                } else {\n                                    console.log(\"[ingest] Relationship created:\", subjectName, rel.predicate, objectName);\n                                }\n                            }\n                        }\n                    }\n                } catch (relErr) {\n                    console.error(\"[ingest] Relationship extraction failed:\", relErr.message);\n                }\n            }\n        }\n        console.log(\"[ingest] timeline_event raw object:\", JSON.stringify(parsed.timeline_event, null, 2));\n        console.log(\"[ingest] raw event_type:\", parsed.timeline_event?.event_type);\n        const ALLOWED_EVENT_TYPES = [\n            \"release\",\n            \"upgrade\",\n            \"security\",\n            \"regulation\",\n            \"funding\",\n            \"partnership\",\n            \"leadership\",\n            \"research\",\n            \"infrastructure\",\n            \"other\"\n        ];\n        const EVENT_TYPE_KEYWORD_MAP = [\n            [\n                \"release\",\n                \"release\"\n            ],\n            [\n                \"launch\",\n                \"release\"\n            ],\n            [\n                \"upgrade\",\n                \"upgrade\"\n            ],\n            [\n                \"update\",\n                \"upgrade\"\n            ],\n            [\n                \"security\",\n                \"security\"\n            ],\n            [\n                \"breach\",\n                \"security\"\n            ],\n            [\n                \"regulation\",\n                \"regulation\"\n            ],\n            [\n                \"policy\",\n                \"regulation\"\n            ],\n            [\n                \"government\",\n                \"regulation\"\n            ],\n            [\n                \"funding\",\n                \"funding\"\n            ],\n            [\n                \"investment\",\n                \"funding\"\n            ],\n            [\n                \"partnership\",\n                \"partnership\"\n            ],\n            [\n                \"collaboration\",\n                \"partnership\"\n            ],\n            [\n                \"leadership\",\n                \"leadership\"\n            ],\n            [\n                \"ceo\",\n                \"leadership\"\n            ],\n            [\n                \"research\",\n                \"research\"\n            ],\n            [\n                \"paper\",\n                \"research\"\n            ],\n            [\n                \"infrastructure\",\n                \"infrastructure\"\n            ],\n            [\n                \"data center\",\n                \"infrastructure\"\n            ]\n        ];\n        function normalizeEventType(raw) {\n            if (!raw) return \"other\";\n            const lower = raw.toLowerCase().trim();\n            if (ALLOWED_EVENT_TYPES.includes(lower)) return lower;\n            for (const [keyword, mapped] of EVENT_TYPE_KEYWORD_MAP){\n                if (lower.includes(keyword)) return mapped;\n            }\n            return \"other\";\n        }\n        if (parsed.timeline_event && parsed.timeline_event.entity) {\n            const eventType = normalizeEventType(parsed.timeline_event.event_type);\n            const timelineEntityName = parsed.timeline_event.entity;\n            const timelineEntitySlug = timelineEntityName.toLowerCase().trim().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\").replace(/-+/g, \"-\").replace(/^-|-$/g, \"\");\n            const { data: timelineEntity } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"entities\").select(\"id\").eq(\"slug\", timelineEntitySlug).limit(1).single();\n            if (timelineEntity) {\n                const { error: timelineError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"timelines\").insert({\n                    entity: timelineEntity.id,\n                    title: parsed.timeline_event.title,\n                    description: parsed.timeline_event.description,\n                    event_date: parsed.timeline_event.date,\n                    event_type: eventType,\n                    source_url: url,\n                    confidence: 0.85\n                });\n                if (timelineError) {\n                    console.error(\"Timeline insert failed:\", timelineError.message);\n                }\n            } else {\n                console.warn(\"[ingest] Timeline entity not found in DB:\", timelineEntityName);\n            }\n        }\n        await logIngestion(url, \"success\", startTime);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            slug,\n            article_id: articleData.id,\n            entities: parsed.entities || []\n        });\n    } catch (err) {\n        console.error(\"Ingest error:\", err);\n        const sourceUrl = err?._sourceUrl || \"unknown\";\n        await logIngestion(sourceUrl, \"internal_error\", startTime, err.message || \"Unknown error\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal server error.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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PzgyZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tIFwiQC9saWIvc3VwYWJhc2VcIjtcbmltcG9ydCB7IGFudGhyb3BpY0NsaWVudCwgQU5USFJPUElDX0FQSV9LRVkgfSBmcm9tIFwiQC9saWIvYW50aHJvcGljXCI7XG5cbmNvbnN0IFNZU1RFTV9QUk9NUFQgPSBgXG5Zb3UgYXJlIGFuIGludGVsbGlnZW5jZSBhbmFseXNpcyBlbmdpbmUuXG5cblJld3JpdGUgdGhlIHByb3ZpZGVkIGFydGljbGUgaW50byBhIG5ldXRyYWwsIGFuYWx5dGljYWwgaW50ZWxsaWdlbmNlIGJyaWVmLlxuXG5SZW1vdmUgbWFya2V0aW5nIHRvbmUuXG5ObyBoeXBlLlxuVGVjaG5pY2FsIHNpZ25pZmljYW5jZS5cbkdlb3BvbGl0aWNhbCBpbXBhY3QuXG5cblNlbGVjdCBjYXRlZ29yeSBzdHJpY3RseSBmcm9tOlxuXG5BSVxuQUkgR292ZXJuYW5jZVxuQUkgT3BlcmF0aW9uc1xuUXVhbnR1bVxuU3BhY2VcbkJpb3RlY2hcbkluZGlh4oCTQ2hpbmFcblVTQSBFdXJvcGVcbkludGVsbGlnZW5jZSBCcmllZlxuXG5FeHRyYWN0IG9ubHkgY2xlYXJseSBtZW50aW9uZWQgZW50aXRpZXMgZnJvbSB0aGUgYXJ0aWNsZS5cbkRvIG5vdCBoYWxsdWNpbmF0ZSBlbnRpdGllcy5cbk1heGltdW0gOCBlbnRpdGllcy5cbklmIG5vbmUgYXJlIGNsZWFybHkgbWVudGlvbmVkLCByZXR1cm4gYW4gZW1wdHkgYXJyYXkuXG5cblJldHVybiBTVFJJQ1QgSlNPTiBPTkxZOlxuXG57XG4gIFwidGl0bGVcIjogXCJcIixcbiAgXCJjb250ZW50XCI6IFwiXCIsXG4gIFwic3VtbWFyeVwiOiBcIlwiLFxuICBcImNhdGVnb3J5XCI6IFwiXCIsXG4gIFwiZW50aXRpZXNcIjogW1xuICAgIHsgXCJuYW1lXCI6IFwiXCIsIFwidHlwZVwiOiBcImNvbXBhbnkgfCBtb2RlbCB8IGNvdW50cnkgfCBsYWIgfCByZWd1bGF0b3JcIiB9XG4gIF0sXG4gIFwidGltZWxpbmVfZXZlbnRcIjoge1xuICAgIFwiZW50aXR5XCI6IFwiXCIsXG4gICAgXCJkYXRlXCI6IFwiXCIsXG4gICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIixcbiAgICBcImV2ZW50X3R5cGVcIjogXCJyZWxlYXNlIHwgdXBncmFkZSB8IHNlY3VyaXR5IHwgcmVndWxhdGlvbiB8IGZ1bmRpbmcgfCBwYXJ0bmVyc2hpcCB8IGxlYWRlcnNoaXAgfCByZXNlYXJjaCB8IGluZnJhc3RydWN0dXJlIHwgb3RoZXJcIlxuICB9XG59XG5cbllvdSBNVVNUIGFsd2F5cyByZXR1cm4gZXZlbnRfdHlwZSBpbiB0aW1lbGluZV9ldmVudC5cbkRvIE5PVCBpbnZlbnQgbmV3IGxhYmVscy5cbkNob29zZSB0aGUgY2xvc2VzdCBtYXRjaCBmcm9tIHRoZSBhbGxvd2VkIHZhbHVlcy5cbklmIHVuY2VydGFpbiwgdXNlIFwib3RoZXJcIi5cblxuZXZlbnRfdHlwZSBNVVNUIGJlIG9uZSBvZjpcbi0gcmVsZWFzZSDihpIgbmV3IHByb2R1Y3Qgb3IgbW9kZWwgbGF1bmNoXG4tIHVwZ3JhZGUg4oaSIG1ham9yIHZlcnNpb24gaW1wcm92ZW1lbnRcbi0gc2VjdXJpdHkg4oaSIGJyZWFjaCwgdnVsbmVyYWJpbGl0eSwgb3IgZGF0YSBpc3N1ZVxuLSByZWd1bGF0aW9uIOKGkiBnb3Zlcm5tZW50IGFjdGlvbiBvciBwb2xpY3lcbi0gZnVuZGluZyDihpIgaW52ZXN0bWVudCBvciBmaW5hbmNpYWwgZXZlbnRcbi0gcGFydG5lcnNoaXAg4oaSIGNvbGxhYm9yYXRpb24gYmV0d2VlbiBlbnRpdGllc1xuLSBsZWFkZXJzaGlwIOKGkiBDRU8gY2hhbmdlIG9yIGV4ZWN1dGl2ZSBzaGlmdFxuLSByZXNlYXJjaCDihpIgcHVibGlzaGVkIGJyZWFrdGhyb3VnaCBvciBwYXBlclxuLSBpbmZyYXN0cnVjdHVyZSDihpIgZGF0YSBjZW50ZXJzLCBjb21wdXRlIGV4cGFuc2lvblxuLSBvdGhlciDihpIgbm9uZSBvZiB0aGUgYWJvdmVcblxuSWYgbm8gdGltZWxpbmVfZXZlbnQgZXhpc3RzLCBzZXQgdGltZWxpbmVfZXZlbnQgdG8gbnVsbC5cbk5vIG1hcmtkb3duLlxuTm8gY29tbWVudGFyeS5cbk9ubHkgdmFsaWQgSlNPTi5cbmA7XG5cbmZ1bmN0aW9uIGNoZWNrQXV0aChyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IGJvb2xlYW4ge1xuICBjb25zdCBhZG1pbkF1dGggPSByZXF1ZXN0LmNvb2tpZXMuZ2V0KFwiYWRtaW4tYXV0aFwiKT8udmFsdWU7XG4gIGNvbnN0IGFkbWluU2VjcmV0ID0gcHJvY2Vzcy5lbnYuQURNSU5fU0VDUkVUO1xuICByZXR1cm4gISFhZG1pblNlY3JldCAmJiBhZG1pbkF1dGggPT09IGFkbWluU2VjcmV0O1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZVNsdWcodGl0bGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiB0aXRsZVxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnRyaW0oKVxuICAgIC5yZXBsYWNlKC9bXmEtejAtOVxccy1dL2csIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xccysvZywgXCItXCIpXG4gICAgLnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuICAgIC5yZXBsYWNlKC9eLXwtJC9nLCBcIlwiKVxuICAgIC5zbGljZSgwLCA4MCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFVuaXF1ZVNsdWcoYmFzZVNsdWc6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbShcImFydGljbGVzXCIpXG4gICAgLnNlbGVjdChcInNsdWdcIilcbiAgICAubGlrZShcInNsdWdcIiwgYCR7YmFzZVNsdWd9JWApO1xuXG4gIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGJhc2VTbHVnO1xuXG4gIGNvbnN0IGV4aXN0aW5nID0gbmV3IFNldChkYXRhLm1hcCgocm93OiB7IHNsdWc6IHN0cmluZyB9KSA9PiByb3cuc2x1ZykpO1xuICBpZiAoIWV4aXN0aW5nLmhhcyhiYXNlU2x1ZykpIHJldHVybiBiYXNlU2x1ZztcblxuICBsZXQgY291bnRlciA9IDI7XG4gIHdoaWxlIChleGlzdGluZy5oYXMoYCR7YmFzZVNsdWd9LSR7Y291bnRlcn1gKSkgY291bnRlcisrO1xuICByZXR1cm4gYCR7YmFzZVNsdWd9LSR7Y291bnRlcn1gO1xufVxuXG5mdW5jdGlvbiBzdHJpcEh0bWwoaHRtbDogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IHRleHQgPSBodG1sO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88c2NyaXB0W1xcc1xcU10qPzxcXC9zY3JpcHQ+L2dpLCBcIlwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvPHN0eWxlW1xcc1xcU10qPzxcXC9zdHlsZT4vZ2ksIFwiXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88bmF2W1xcc1xcU10qPzxcXC9uYXY+L2dpLCBcIlwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvPGZvb3RlcltcXHNcXFNdKj88XFwvZm9vdGVyPi9naSwgXCJcIik7XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxoZWFkZXJbXFxzXFxTXSo/PFxcL2hlYWRlcj4vZ2ksIFwiXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88YXNpZGVbXFxzXFxTXSo/PFxcL2FzaWRlPi9naSwgXCJcIik7XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxpZnJhbWVbXFxzXFxTXSo/PFxcL2lmcmFtZT4vZ2ksIFwiXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88bm9zY3JpcHRbXFxzXFxTXSo/PFxcL25vc2NyaXB0Pi9naSwgXCJcIik7XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxbXj5dKz4vZywgXCIgXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8mbmJzcDsvZywgXCIgXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8mYW1wOy9nLCBcIiZcIik7XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyZsdDsvZywgXCI8XCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8mZ3Q7L2csIFwiPlwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvJnF1b3Q7L2csICdcIicpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8mIzM5Oy9nLCBcIidcIik7XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xccysvZywgXCIgXCIpO1xuICByZXR1cm4gdGV4dC50cmltKCk7XG59XG5cbmludGVyZmFjZSBBaVJlc3VsdCB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgc3VtbWFyeTogc3RyaW5nO1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICBlbnRpdGllczogeyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9W107XG4gIHRpbWVsaW5lX2V2ZW50OiB7XG4gICAgZW50aXR5OiBzdHJpbmc7XG4gICAgZGF0ZTogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBldmVudF90eXBlPzogc3RyaW5nO1xuICB9IHwgbnVsbDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbG9nSW5nZXN0aW9uKHNvdXJjZV91cmw6IHN0cmluZywgc3RhdHVzOiBzdHJpbmcsIHN0YXJ0VGltZTogbnVtYmVyLCBlcnJvcl9tZXNzYWdlPzogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgc3VwYWJhc2UuZnJvbShcImluZ2VzdGlvbl9sb2dzXCIpLmluc2VydCh7XG4gICAgICBzb3VyY2VfdXJsLFxuICAgICAgc3RhdHVzLFxuICAgICAgcHJvY2Vzc2luZ190aW1lX21zOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgLi4uKGVycm9yX21lc3NhZ2UgPyB7IGVycm9yX21lc3NhZ2UgfSA6IHt9KSxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhcIltpbmdlc3RdIExvZ2dlZDpcIiwgc3RhdHVzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJbaW5nZXN0XSBGYWlsZWQgdG8gd3JpdGUgaW5nZXN0aW9uIGxvZzpcIiwgZSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcblxuICB0cnkge1xuICAgIGlmICghY2hlY2tBdXRoKHJlcXVlc3QpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiVW5hdXRob3JpemVkLlwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgbGV0IGJvZHk6IHsgdXJsPzogc3RyaW5nIH07XG4gICAgdHJ5IHtcbiAgICAgIGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJJbnZhbGlkIEpTT04gYm9keS5cIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXJsIH0gPSBib2R5O1xuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJ1cmwgaXMgcmVxdWlyZWQuXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgbmV3IFVSTCh1cmwpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkludmFsaWQgVVJMIGZvcm1hdC5cIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmcgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImFydGljbGVzXCIpXG4gICAgICAuc2VsZWN0KFwiaWQsIHRpdGxlXCIpXG4gICAgICAuZXEoXCJzb3VyY2VfdXJsXCIsIHVybClcbiAgICAgIC5saW1pdCgxKTtcblxuICAgIGlmIChleGlzdGluZyAmJiBleGlzdGluZy5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCBsb2dJbmdlc3Rpb24odXJsLCBcImR1cGxpY2F0ZVwiLCBzdGFydFRpbWUpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGBBbHJlYWR5IGluZ2VzdGVkOiBcIiR7ZXhpc3RpbmdbMF0udGl0bGV9XCJgLFxuICAgICAgICAgIGR1cGxpY2F0ZTogdHJ1ZSxcbiAgICAgICAgICBleGlzdGluZ19pZDogZXhpc3RpbmdbMF0uaWQsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDkgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgZmV0Y2hSZXM6IFJlc3BvbnNlO1xuICAgIGNvbnN0IGZldGNoU3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDEwMDAwKTtcbiAgICAgIGZldGNoUmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIlVzZXItQWdlbnRcIjogXCJNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgUGhlbm9tZW55Qm90LzEuMClcIixcbiAgICAgICAgICBcIkFjY2VwdFwiOiBcInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWxcIixcbiAgICAgICAgfSxcbiAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCxcbiAgICAgIH0pO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGNvbnN0IGZldGNoRHVyYXRpb24gPSBEYXRlLm5vdygpIC0gZmV0Y2hTdGFydDtcbiAgICAgIGNvbnNvbGUubG9nKFwiW2luZ2VzdF0gRmV0Y2ggdGltZTpcIiwgZmV0Y2hEdXJhdGlvbik7XG4gICAgICBpZiAoZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgIGF3YWl0IGxvZ0luZ2VzdGlvbih1cmwsIFwiZmV0Y2hfZXJyb3JcIiwgc3RhcnRUaW1lLCBcIlJlcXVlc3QgdGltZWQgb3V0IGFmdGVyIDEwc1wiKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlJlcXVlc3QgdGltZWQgb3V0LlwiIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwOCB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBhd2FpdCBsb2dJbmdlc3Rpb24odXJsLCBcImZldGNoX2Vycm9yXCIsIHN0YXJ0VGltZSwgZXJyLm1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEZhaWxlZCB0byBmZXRjaCBVUkw6ICR7ZXJyLm1lc3NhZ2V9YCB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgZmV0Y2hEdXJhdGlvbiA9IERhdGUubm93KCkgLSBmZXRjaFN0YXJ0O1xuICAgIGNvbnNvbGUubG9nKFwiW2luZ2VzdF0gRmV0Y2ggdGltZTpcIiwgZmV0Y2hEdXJhdGlvbik7XG5cbiAgICBpZiAoIWZldGNoUmVzLm9rKSB7XG4gICAgICBjb25zdCBlcnJNc2cgPSBgVVJMIHJldHVybmVkICR7ZmV0Y2hSZXMuc3RhdHVzfSAke2ZldGNoUmVzLnN0YXR1c1RleHR9YDtcbiAgICAgIGF3YWl0IGxvZ0luZ2VzdGlvbih1cmwsIFwiZmV0Y2hfZXJyb3JcIiwgc3RhcnRUaW1lLCBlcnJNc2cpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyTXNnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50VHlwZSA9IGZldGNoUmVzLmhlYWRlcnMuZ2V0KFwiY29udGVudC10eXBlXCIpIHx8IFwiXCI7XG4gICAgaWYgKCFjb250ZW50VHlwZS5pbmNsdWRlcyhcInRleHQvaHRtbFwiKSkge1xuICAgICAgYXdhaXQgbG9nSW5nZXN0aW9uKHVybCwgXCJmZXRjaF9lcnJvclwiLCBzdGFydFRpbWUsIGBVbnN1cHBvcnRlZCBjb250ZW50IHR5cGU6ICR7Y29udGVudFR5cGV9YCk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlVuc3VwcG9ydGVkIGNvbnRlbnQgdHlwZVwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgZmV0Y2hSZXMudGV4dCgpO1xuICAgIGxldCBjbGVhbmVkVGV4dCA9IHN0cmlwSHRtbChodG1sKTtcbiAgICBpZiAoY2xlYW5lZFRleHQubGVuZ3RoID4gMTUwMDApIHtcbiAgICAgIGNsZWFuZWRUZXh0ID0gY2xlYW5lZFRleHQuc2xpY2UoMCwgMTUwMDApO1xuICAgICAgY29uc29sZS53YXJuKFwiW2luZ2VzdF0gQ29udGVudCB0cnVuY2F0ZWRcIik7XG4gICAgfVxuXG4gICAgaWYgKGNsZWFuZWRUZXh0Lmxlbmd0aCA8IDEwMCkge1xuICAgICAgYXdhaXQgbG9nSW5nZXN0aW9uKHVybCwgXCJmZXRjaF9lcnJvclwiLCBzdGFydFRpbWUsIFwiRXh0cmFjdGVkIHRleHQgdG9vIHNob3J0XCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJFeHRyYWN0ZWQgdGV4dCB0b28gc2hvcnQg4oCUIHBvc3NpYmx5IHBheXdhbGxlZCBvciBlbXB0eSBwYWdlLlwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MjIgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIUFOVEhST1BJQ19BUElfS0VZKSB7XG4gICAgICBhd2FpdCBsb2dJbmdlc3Rpb24odXJsLCBcImFpX3ZhbGlkYXRpb25fZXJyb3JcIiwgc3RhcnRUaW1lLCBcIkFOVEhST1BJQ19BUElfS0VZIG5vdCBjb25maWd1cmVkXCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJBTlRIUk9QSUNfQVBJX0tFWSBpcyBub3QgY29uZmlndXJlZC5cIiB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IGFpUmF3OiBzdHJpbmc7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYW50aHJvcGljQ2xpZW50LnBvc3QoXCIvbWVzc2FnZXNcIiwge1xuICAgICAgICBtb2RlbDogXCJjbGF1ZGUtc29ubmV0LTQtMjAyNTA1MTRcIixcbiAgICAgICAgbWF4X3Rva2VuczogMjAwMCxcbiAgICAgICAgc3lzdGVtOiBTWVNURU1fUFJPTVBULFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgICAgY29udGVudDogY2xlYW5lZFRleHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pO1xuXG4gICAgICBhaVJhdyA9IHJlc3BvbnNlLmRhdGE/LmNvbnRlbnQ/LlswXT8udGV4dDtcbiAgICAgIGlmICghYWlSYXcpIHtcbiAgICAgICAgYXdhaXQgbG9nSW5nZXN0aW9uKHVybCwgXCJhaV92YWxpZGF0aW9uX2Vycm9yXCIsIHN0YXJ0VGltZSwgXCJFbXB0eSByZXNwb25zZSBmcm9tIEFudGhyb3BpY1wiKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkVtcHR5IHJlc3BvbnNlIGZyb20gQW50aHJvcGljLlwiIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGVyci5yZXNwb25zZT8uZGF0YT8uZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyLm1lc3NhZ2UgfHwgXCJVbmtub3duIEFudGhyb3BpYyBlcnJvclwiO1xuICAgICAgYXdhaXQgbG9nSW5nZXN0aW9uKHVybCwgXCJhaV92YWxpZGF0aW9uX2Vycm9yXCIsIHN0YXJ0VGltZSwgbXNnKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBBSSByZXF1ZXN0IGZhaWxlZDogJHttc2d9YCB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHBhcnNlZDogQWlSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSBhaVJhdy5yZXBsYWNlKC9gYGBqc29uXFxzKi9nLCBcIlwiKS5yZXBsYWNlKC9gYGBcXHMqL2csIFwiXCIpLnRyaW0oKTtcbiAgICAgIHBhcnNlZCA9IEpTT04ucGFyc2UoY2xlYW5lZCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBhd2FpdCBsb2dJbmdlc3Rpb24odXJsLCBcImFpX3ZhbGlkYXRpb25fZXJyb3JcIiwgc3RhcnRUaW1lLCBcIkZhaWxlZCB0byBwYXJzZSBBSSByZXNwb25zZSBhcyBKU09OXCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJGYWlsZWQgdG8gcGFyc2UgQUkgcmVzcG9uc2UgYXMgSlNPTi5cIiB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJzZWQudGl0bGUgfHwgIXBhcnNlZC5jb250ZW50KSB7XG4gICAgICBhd2FpdCBsb2dJbmdlc3Rpb24odXJsLCBcImFpX3ZhbGlkYXRpb25fZXJyb3JcIiwgc3RhcnRUaW1lLCBcIkFJIHJlc3BvbnNlIG1pc3NpbmcgcmVxdWlyZWQgdGl0bGUgb3IgY29udGVudFwiKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiQUkgcmVzcG9uc2UgbWlzc2luZyByZXF1aXJlZCB0aXRsZSBvciBjb250ZW50LlwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBiYXNlU2x1ZyA9IGdlbmVyYXRlU2x1ZyhwYXJzZWQudGl0bGUpO1xuICAgIGNvbnN0IHNsdWcgPSBhd2FpdCBnZXRVbmlxdWVTbHVnKGJhc2VTbHVnKTtcblxuICAgIGNvbnN0IGFydGljbGVJbnNlcnQgPSB7XG4gICAgICB0aXRsZTogcGFyc2VkLnRpdGxlLFxuICAgICAgY29udGVudDogcGFyc2VkLmNvbnRlbnQsXG4gICAgICBzbHVnLFxuICAgICAgc3RhdHVzOiBcInB1Ymxpc2hlZFwiLFxuICAgICAgcHVibGlzaF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgc291cmNlX3VybDogdXJsLFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhcIltpbmdlc3RdIEluc2VydGluZyBhcnRpY2xlIChjYXRlZ29yeSBvbWl0dGVkIHRvIGlzb2xhdGUgc2NoZW1hIGNhY2hlIGlzc3VlKVwiKTtcblxuICAgIGNvbnN0IHsgZGF0YTogYXJ0aWNsZURhdGEsIGVycm9yOiBhcnRpY2xlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImFydGljbGVzXCIpXG4gICAgICAuaW5zZXJ0KGFydGljbGVJbnNlcnQpXG4gICAgICAuc2VsZWN0KFwiaWRcIilcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChhcnRpY2xlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbaW5nZXN0XSBBcnRpY2xlIGluc2VydCBlcnJvcjpcIiwgSlNPTi5zdHJpbmdpZnkoYXJ0aWNsZUVycm9yLCBudWxsLCAyKSk7XG4gICAgICBhd2FpdCBsb2dJbmdlc3Rpb24odXJsLCBcImluc2VydF9lcnJvclwiLCBzdGFydFRpbWUsIGFydGljbGVFcnJvci5tZXNzYWdlKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBBcnRpY2xlIGluc2VydCBmYWlsZWQ6ICR7YXJ0aWNsZUVycm9yLm1lc3NhZ2V9YCB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJbaW5nZXN0XSBBcnRpY2xlIGluc2VydGVkIHN1Y2Nlc3NmdWxseSwgaWQ6XCIsIGFydGljbGVEYXRhLmlkKTtcblxuICAgIGNvbnN0IEFMTE9XRURfRU5USVRZX1RZUEVTID0gW1xuICAgICAgXCJjb21wYW55XCIsXG4gICAgICBcIm1vZGVsXCIsXG4gICAgICBcImNvdW50cnlcIixcbiAgICAgIFwibGFiXCIsXG4gICAgICBcInJlZ3VsYXRvclwiLFxuICAgICAgXCJwZXJzb25cIixcbiAgICAgIFwiaW5zdGl0dXRpb25cIixcbiAgICAgIFwiZXZlbnRcIlxuICAgIF07XG5cbiAgICBjb25zdCBHRU5FUklDX0VOVElUWV9CTE9DS0xJU1QgPSBbXG4gICAgICBcImFpXCIsXG4gICAgICBcImFydGlmaWNpYWwgaW50ZWxsaWdlbmNlXCIsXG4gICAgICBcInRlY2hub2xvZ3lcIixcbiAgICAgIFwidGVjaFwiLFxuICAgICAgXCJpbmR1c3RyeVwiLFxuICAgICAgXCJnb3Zlcm5tZW50XCIsXG4gICAgICBcImNvbXBhbnlcIixcbiAgICAgIFwiY29ycG9yYXRpb25cIixcbiAgICAgIFwic3RhcnR1cFwiLFxuICAgICAgXCJwbGF0Zm9ybVwiLFxuICAgICAgXCJzeXN0ZW1cIixcbiAgICAgIFwibW9kZWxcIixcbiAgICAgIFwicmVzZWFyY2hcIixcbiAgICAgIFwiaW5zdGl0dXRlXCJcbiAgICBdO1xuXG4gICAgY29uc3QgQUlfQ0FURUdPUklFUyA9IFtcIkFJXCIsIFwiQUkgR292ZXJuYW5jZVwiLCBcIkFJIE9wZXJhdGlvbnNcIl07XG4gICAgY29uc3QgQUlfS0VZV09SRFMgPSAvXFxiKGFpfGFydGlmaWNpYWwgaW50ZWxsaWdlbmNlfG1vZGVsfHJlc2VhcmNofHJlZ3VsYXRpb24pXFxiL2k7XG4gICAgY29uc3QgRVZFTlRfS0VZV09SRFMgPSAvXFxiKGFpfHN1bW1pdHxleHBvfGNvbmZlcmVuY2UpXFxiL2k7XG4gICAgY29uc3QgSU5TVElUVVRJT05fS0VZV09SRFMgPSAvXFxiKHVuaXZlcnNpdHl8aW5zdGl0dXRlfGxhYnxyZXNlYXJjaClcXGIvaTtcbiAgICBjb25zdCBSRUpFQ1RFRF9QQVRURVJOUyA9IC9cXGIocGFydHl8cGFydGllc3x3aW5nfHdpbmdzfHZlbnVlfGFyZW5hfHN0YWRpdW18aGFsbHxjZW50ZXJ8Y2VudHJlfGNvbnZlbnRpb24gY2VudGVyKVxcYi9pO1xuXG4gICAgZnVuY3Rpb24gcGFzc2VzQ29udGV4dHVhbEZpbHRlcihlbnRpdHk6IHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfSwgYXJ0aWNsZUNhdGVnb3J5OiBzdHJpbmcsIGFydGljbGVDb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgIGNvbnN0IG5hbWVMb3dlciA9IGVudGl0eS5uYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICBpZiAoUkVKRUNURURfUEFUVEVSTlMudGVzdChuYW1lTG93ZXIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVudGl0eS50eXBlID09PSBcInBlcnNvblwiKSB7XG4gICAgICAgIGlmICghQUlfQ0FURUdPUklFUy5pbmNsdWRlcyhhcnRpY2xlQ2F0ZWdvcnkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghQUlfS0VZV09SRFMudGVzdChhcnRpY2xlQ29udGVudCkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVudGl0eS50eXBlID09PSBcImV2ZW50XCIpIHtcbiAgICAgICAgaWYgKCFFVkVOVF9LRVlXT1JEUy50ZXN0KG5hbWVMb3dlcikpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVudGl0eS50eXBlID09PSBcImluc3RpdHV0aW9uXCIpIHtcbiAgICAgICAgaWYgKCFJTlNUSVRVVElPTl9LRVlXT1JEUy50ZXN0KG5hbWVMb3dlcikpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgQ09SUE9SQVRFX1NVRkZJWEVTID0gL1xccysoSW5jXFwuP3xDb3Jwb3JhdGlvbnxDb3JwXFwuP3xMdGRcXC4/fExMQ3xQbGN8UExDKSQvaTtcblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZUVudGl0eU5hbWUocmF3OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgbGV0IG5hbWUgPSByYXcudHJpbSgpO1xuICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXGJcXHcvZywgKGMpID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKENPUlBPUkFURV9TVUZGSVhFUywgXCJcIik7XG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bLC5cXHNdKyQvLCBcIlwiKTtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKTtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH1cblxuICAgIGxldCBmaXJzdENvbXBhbnlJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgY29uc3QgbW9kZWxFbnRpdHlJZHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAocGFyc2VkLmVudGl0aWVzICYmIEFycmF5LmlzQXJyYXkocGFyc2VkLmVudGl0aWVzKSAmJiBwYXJzZWQuZW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBlbnRpdHkgb2YgcGFyc2VkLmVudGl0aWVzKSB7XG4gICAgICAgIGlmICghZW50aXR5Lm5hbWUgfHwgdHlwZW9mIGVudGl0eS5uYW1lICE9PSBcInN0cmluZ1wiIHx8ICFlbnRpdHkubmFtZS50cmltKCkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJbaW5nZXN0XSBFbnRpdHkgcmVqZWN0ZWQ6XCIsIGVudGl0eS5uYW1lKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVudGl0eS50eXBlIHx8ICFBTExPV0VEX0VOVElUWV9UWVBFUy5pbmNsdWRlcyhlbnRpdHkudHlwZSkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJbaW5nZXN0XSBFbnRpdHkgcmVqZWN0ZWQ6XCIsIGVudGl0eS5uYW1lKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW50aXR5Lm5hbWUudHJpbSgpLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJbaW5nZXN0XSBFbnRpdHkgcmVqZWN0ZWQ6XCIsIGVudGl0eS5uYW1lKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoL15cXGQrJC8udGVzdChlbnRpdHkubmFtZS50cmltKCkpKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiW2luZ2VzdF0gRW50aXR5IHJlamVjdGVkOlwiLCBlbnRpdHkubmFtZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEdFTkVSSUNfRU5USVRZX0JMT0NLTElTVC5pbmNsdWRlcyhlbnRpdHkubmFtZS50cmltKCkudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJbaW5nZXN0XSBFbnRpdHkgcmVqZWN0ZWQ6XCIsIGVudGl0eS5uYW1lKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhc3Nlc0NvbnRleHR1YWxGaWx0ZXIoZW50aXR5LCBwYXJzZWQuY2F0ZWdvcnkgfHwgXCJcIiwgcGFyc2VkLmNvbnRlbnQgfHwgXCJcIikpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJbaW5nZXN0XSBSZWplY3RlZCBjb250ZXh0dWFsIGVudGl0eTpcIiwgZW50aXR5Lm5hbWUpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW50aXR5TmFtZSA9IG5vcm1hbGl6ZUVudGl0eU5hbWUoZW50aXR5Lm5hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIltpbmdlc3RdIE5vcm1hbGl6ZWQgZW50aXR5OlwiLCBlbnRpdHlOYW1lKTtcblxuICAgICAgICBpZiAoIWVudGl0eU5hbWUpIGNvbnRpbnVlO1xuXG4gICAgICAgIGNvbnN0IGVudGl0eVNsdWcgPSBlbnRpdHlOYW1lXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCItXCIpXG4gICAgICAgICAgLnJlcGxhY2UoL1teYS16MC05LV0vZywgXCJcIilcbiAgICAgICAgICAucmVwbGFjZSgvLSsvZywgXCItXCIpXG4gICAgICAgICAgLnJlcGxhY2UoL14tfC0kL2csIFwiXCIpO1xuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdFbnRpdHkgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oXCJlbnRpdGllc1wiKVxuICAgICAgICAgIC5zZWxlY3QoXCJpZFwiKVxuICAgICAgICAgIC5lcShcInNsdWdcIiwgZW50aXR5U2x1ZylcbiAgICAgICAgICAubGltaXQoMSlcbiAgICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgICAgbGV0IGVudGl0eUlkOiBzdHJpbmc7XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nRW50aXR5KSB7XG4gICAgICAgICAgZW50aXR5SWQgPSBleGlzdGluZ0VudGl0eS5pZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IG5ld0VudGl0eSwgZXJyb3I6IGluc2VydEVudGl0eUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgLmZyb20oXCJlbnRpdGllc1wiKVxuICAgICAgICAgICAgLmluc2VydCh7IG5hbWU6IGVudGl0eU5hbWUsIHNsdWc6IGVudGl0eVNsdWcsIHR5cGU6IGVudGl0eS50eXBlIH0pXG4gICAgICAgICAgICAuc2VsZWN0KFwiaWRcIilcbiAgICAgICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgICAgIGlmIChpbnNlcnRFbnRpdHlFcnJvciB8fCAhbmV3RW50aXR5KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW2luZ2VzdF0gRW50aXR5IGluc2VydCBmYWlsZWQ6XCIsIGVudGl0eU5hbWUsIGluc2VydEVudGl0eUVycm9yPy5tZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbnRpdHlJZCA9IG5ld0VudGl0eS5pZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRpdHkudHlwZSA9PT0gXCJtb2RlbFwiKSB7XG4gICAgICAgICAgbW9kZWxFbnRpdHlJZHMucHVzaChlbnRpdHlJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVudGl0eS50eXBlID09PSBcImNvbXBhbnlcIiAmJiAhZmlyc3RDb21wYW55SWQpIHtcbiAgICAgICAgICBmaXJzdENvbXBhbnlJZCA9IGVudGl0eUlkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBlcnJvcjogbGlua0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKFwiYXJ0aWNsZV9lbnRpdGllc1wiKVxuICAgICAgICAgIC51cHNlcnQoXG4gICAgICAgICAgICB7IGFydGljbGVfaWQ6IGFydGljbGVEYXRhLmlkLCBlbnRpdHlfaWQ6IGVudGl0eUlkIH0sXG4gICAgICAgICAgICB7IG9uQ29uZmxpY3Q6IFwiYXJ0aWNsZV9pZCxlbnRpdHlfaWRcIiB9XG4gICAgICAgICAgKTtcblxuICAgICAgICBpZiAobGlua0Vycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIltpbmdlc3RdIEVudGl0eSBsaW5rIGZhaWxlZDpcIiwgZW50aXR5TmFtZSwgbGlua0Vycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiW2luZ2VzdF0gTGlua2VkIGVudGl0eTpcIiwgZW50aXR5TmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpcnN0Q29tcGFueUlkICYmIG1vZGVsRW50aXR5SWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJbaW5nZXN0XSBMaW5raW5nIG1vZGVscyB0byBjb21wYW55OlwiLCBmaXJzdENvbXBhbnlJZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW2luZ2VzdF0gTW9kZWwgSURzOlwiLCBtb2RlbEVudGl0eUlkcyk7XG5cbiAgICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVSZXN1bHQsIGVycm9yOiBwYXJlbnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbShcImVudGl0aWVzXCIpXG4gICAgICAgICAgLnVwZGF0ZSh7IHBhcmVudF9pZDogZmlyc3RDb21wYW55SWQgfSlcbiAgICAgICAgICAuaW4oXCJpZFwiLCBtb2RlbEVudGl0eUlkcylcbiAgICAgICAgICAuaXMoXCJwYXJlbnRfaWRcIiwgbnVsbClcbiAgICAgICAgICAuc2VsZWN0KCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coXCJbaW5nZXN0XSBMaW5rIHJlc3VsdDpcIiwgSlNPTi5zdHJpbmdpZnkodXBkYXRlUmVzdWx0KSk7XG5cbiAgICAgICAgaWYgKHBhcmVudEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIltpbmdlc3RdIFBhcmVudCBsaW5rIGZhaWxlZDpcIiwgcGFyZW50RXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtpbmdlc3RdIFBhcmVudCBsaW5rYWdlIGNvbXBsZXRlOiAke3VwZGF0ZVJlc3VsdD8ubGVuZ3RoIHx8IDB9IG1vZGVscyBsaW5rZWRgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGNvbnN0IG1vZGVsSWQgb2YgbW9kZWxFbnRpdHlJZHMpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1RpbWVsaW5lIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKFwidGltZWxpbmVzXCIpXG4gICAgICAgICAgLnNlbGVjdChcImlkXCIpXG4gICAgICAgICAgLmVxKFwiZW50aXR5XCIsIG1vZGVsSWQpXG4gICAgICAgICAgLmxpbWl0KDEpO1xuXG4gICAgICAgIGlmICghZXhpc3RpbmdUaW1lbGluZSB8fCBleGlzdGluZ1RpbWVsaW5lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IGZhbGxiYWNrRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAuZnJvbShcInRpbWVsaW5lc1wiKVxuICAgICAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgICAgIGVudGl0eTogbW9kZWxJZCxcbiAgICAgICAgICAgICAgZXZlbnRfdHlwZTogXCJmaXJzdF9hcHBlYXJhbmNlXCIsXG4gICAgICAgICAgICAgIGV2ZW50X2RhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdGl0bGU6IFwiRmlyc3QgYXBwZWFyYW5jZSBpbiByZXBvc2l0b3J5XCIsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwYXJzZWQudGl0bGUgfHwgXCJcIixcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKGZhbGxiYWNrRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbaW5nZXN0XSBGYWxsYmFjayB0aW1lbGluZSBpbnNlcnQgZmFpbGVkIGZvciBtb2RlbFwiLCBtb2RlbElkLCBmYWxsYmFja0Vycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIltpbmdlc3RdIEZhbGxiYWNrIHRpbWVsaW5lIGNyZWF0ZWQgZm9yIG1vZGVsOlwiLCBtb2RlbElkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocGFyc2VkLmVudGl0aWVzICYmIEFycmF5LmlzQXJyYXkocGFyc2VkLmVudGl0aWVzKSAmJiBwYXJzZWQuZW50aXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBlbnRpdHkgb2YgcGFyc2VkLmVudGl0aWVzKSB7XG4gICAgICAgIGNvbnN0IGVudGl0eU5hbWUgPSBub3JtYWxpemVFbnRpdHlOYW1lKGVudGl0eS5uYW1lIHx8IFwiXCIpO1xuICAgICAgICBpZiAoIWVudGl0eU5hbWUpIGNvbnRpbnVlO1xuXG4gICAgICAgIGNvbnN0IGVudGl0eVNsdWcgPSBlbnRpdHlOYW1lXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCItXCIpXG4gICAgICAgICAgLnJlcGxhY2UoL1teYS16MC05LV0vZywgXCJcIilcbiAgICAgICAgICAucmVwbGFjZSgvLSsvZywgXCItXCIpXG4gICAgICAgICAgLnJlcGxhY2UoL14tfC0kL2csIFwiXCIpO1xuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdFbnQgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oXCJlbnRpdGllc1wiKVxuICAgICAgICAgIC5zZWxlY3QoXCJpZCwgc3VtbWFyeVwiKVxuICAgICAgICAgIC5lcShcInNsdWdcIiwgZW50aXR5U2x1ZylcbiAgICAgICAgICAubGltaXQoMSlcbiAgICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nRW50ICYmICFleGlzdGluZ0VudC5zdW1tYXJ5KSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlSZXNwb25zZSA9IGF3YWl0IGFudGhyb3BpY0NsaWVudC5wb3N0KFwiL21lc3NhZ2VzXCIsIHtcbiAgICAgICAgICAgICAgbW9kZWw6IFwiY2xhdWRlLXNvbm5ldC00LTIwMjUwNTE0XCIsXG4gICAgICAgICAgICAgIG1heF90b2tlbnM6IDYwMCxcbiAgICAgICAgICAgICAgc3lzdGVtOiBgWW91IGFyZSBhIGNvbmNpc2UgZW5jeWNsb3BlZGlhIHdyaXRlci4gV3JpdGUgYSAyMDDigJMzMDAgd29yZCBzdHJ1Y3R1cmVkIHN1bW1hcnkgYWJvdXQgdGhlIGdpdmVuIGVudGl0eS4gQ292ZXI6IHdoYXQgaXQgaXMsIGl0cyBzaWduaWZpY2FuY2UgaW4gdGhlIEFJL3RlY2ggbGFuZHNjYXBlLCBrZXkgcHJvZHVjdHMgb3IgY29udHJpYnV0aW9ucywgYW5kIG5vdGFibGUgbWlsZXN0b25lcy4gVXNlIG5ldXRyYWwsIGFuYWx5dGljYWwgdG9uZS4gTm8gbWFya2Rvd24uIE5vIGhlYWRlcnMuIFBsYWluIHRleHQgb25seS5gLFxuICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgY29udGVudDogYFdyaXRlIGEgMjAw4oCTMzAwIHdvcmQgc3VtbWFyeSBhYm91dDogJHtlbnRpdHlOYW1lfSAodHlwZTogJHtlbnRpdHkudHlwZX0pYCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlUZXh0ID0gc3VtbWFyeVJlc3BvbnNlLmRhdGE/LmNvbnRlbnQ/LlswXT8udGV4dDtcbiAgICAgICAgICAgIGlmIChzdW1tYXJ5VGV4dCAmJiBzdW1tYXJ5VGV4dC50cmltKCkubGVuZ3RoID4gNTApIHtcbiAgICAgICAgICAgICAgY29uc3QgeyBlcnJvcjogc3VtbWFyeVVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAgIC5mcm9tKFwiZW50aXRpZXNcIilcbiAgICAgICAgICAgICAgICAudXBkYXRlKHsgc3VtbWFyeTogc3VtbWFyeVRleHQudHJpbSgpIH0pXG4gICAgICAgICAgICAgICAgLmVxKFwiaWRcIiwgZXhpc3RpbmdFbnQuaWQpXG4gICAgICAgICAgICAgICAgLmlzKFwic3VtbWFyeVwiLCBudWxsKTtcblxuICAgICAgICAgICAgICBpZiAoc3VtbWFyeVVwZGF0ZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltpbmdlc3RdIFN1bW1hcnkgdXBkYXRlIGZhaWxlZCBmb3JcIiwgZW50aXR5TmFtZSwgc3VtbWFyeVVwZGF0ZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW2luZ2VzdF0gU3VtbWFyeSBnZW5lcmF0ZWQgZm9yOlwiLCBlbnRpdHlOYW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKHN1bW1hcnlFcnI6IGFueSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltpbmdlc3RdIFN1bW1hcnkgZ2VuZXJhdGlvbiBmYWlsZWQgZm9yXCIsIGVudGl0eU5hbWUsIHN1bW1hcnlFcnIubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgQUxMT1dFRF9QUkVESUNBVEVTID0gW1xuICAgICAgXCJwYXJ0bmVyZWRfd2l0aFwiLFxuICAgICAgXCJhY3F1aXJlZFwiLFxuICAgICAgXCJpbnZlc3RlZF9pblwiLFxuICAgICAgXCJjb21wZXRlc193aXRoXCIsXG4gICAgICBcImRldmVsb3BlZFwiLFxuICAgICAgXCJyZWd1bGF0ZXNcIixcbiAgICAgIFwiZnVuZGVkX2J5XCIsXG4gICAgICBcInN1YnNpZGlhcnlfb2ZcIixcbiAgICAgIFwic3B1bl9vZmZcIixcbiAgICAgIFwiY29sbGFib3JhdGVkX3dpdGhcIixcbiAgICAgIFwic3VwcGxpZXNfdG9cIixcbiAgICAgIFwibGljZW5zZWRfZnJvbVwiLFxuICAgIF07XG5cbiAgICBpZiAocGFyc2VkLmVudGl0aWVzICYmIEFycmF5LmlzQXJyYXkocGFyc2VkLmVudGl0aWVzKSAmJiBwYXJzZWQuZW50aXRpZXMubGVuZ3RoID49IDIpIHtcbiAgICAgIGNvbnN0IGVudGl0eU5hbWVzID0gcGFyc2VkLmVudGl0aWVzXG4gICAgICAgIC5tYXAoKGU6IHsgbmFtZTogc3RyaW5nIH0pID0+IG5vcm1hbGl6ZUVudGl0eU5hbWUoZS5uYW1lIHx8IFwiXCIpKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgICBpZiAoZW50aXR5TmFtZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZWxQcm9tcHQgPSBgRnJvbSB0aGUgZm9sbG93aW5nIGFydGljbGUgdGV4dCBhbmQgbGlzdCBvZiBlbnRpdGllcywgZXh0cmFjdCByZWxhdGlvbnNoaXBzIGJldHdlZW4gZW50aXRpZXMuXG5cbkVudGl0aWVzOiAke2VudGl0eU5hbWVzLmpvaW4oXCIsIFwiKX1cblxuQWxsb3dlZCBwcmVkaWNhdGVzICh1c2UgT05MWSB0aGVzZSk6XG4ke0FMTE9XRURfUFJFRElDQVRFUy5qb2luKFwiLCBcIil9XG5cblJldHVybiBTVFJJQ1QgSlNPTiBhcnJheSBvbmx5LiBObyBtYXJrZG93bi4gTm8gY29tbWVudGFyeS5cbkVhY2ggZWxlbWVudDoge1wic3ViamVjdFwiOiBcIlwiLCBcInByZWRpY2F0ZVwiOiBcIlwiLCBcIm9iamVjdFwiOiBcIlwiLCBcImNvbmZpZGVuY2VcIjogMC4wfVxuXG5SdWxlczpcbi0gc3ViamVjdCBhbmQgb2JqZWN0IE1VU1QgYmUgZnJvbSB0aGUgZW50aXR5IGxpc3QgYWJvdmVcbi0gcHJlZGljYXRlIE1VU1QgYmUgZnJvbSB0aGUgYWxsb3dlZCBsaXN0XG4tIGNvbmZpZGVuY2UgYmV0d2VlbiAwLjAgYW5kIDEuMFxuLSBJZiBubyByZWxhdGlvbnNoaXBzIGV4aXN0LCByZXR1cm4gW11cblxuQXJ0aWNsZSB0ZXh0OlxuJHtwYXJzZWQuY29udGVudC5zbGljZSgwLCAzMDAwKX1gO1xuXG4gICAgICAgICAgY29uc3QgcmVsUmVzcG9uc2UgPSBhd2FpdCBhbnRocm9waWNDbGllbnQucG9zdChcIi9tZXNzYWdlc1wiLCB7XG4gICAgICAgICAgICBtb2RlbDogXCJjbGF1ZGUtc29ubmV0LTQtMjAyNTA1MTRcIixcbiAgICAgICAgICAgIG1heF90b2tlbnM6IDgwMCxcbiAgICAgICAgICAgIHN5c3RlbTogXCJZb3UgZXh0cmFjdCBlbnRpdHkgcmVsYXRpb25zaGlwcyBmcm9tIHRleHQuIFJldHVybiBvbmx5IHZhbGlkIEpTT04gYXJyYXlzLiBObyBtYXJrZG93bi5cIixcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogcmVsUHJvbXB0IH1dLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY29uc3QgcmVsUmF3ID0gcmVsUmVzcG9uc2UuZGF0YT8uY29udGVudD8uWzBdPy50ZXh0O1xuICAgICAgICAgIGlmIChyZWxSYXcpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSByZWxSYXcucmVwbGFjZSgvYGBganNvblxccyovZywgXCJcIikucmVwbGFjZSgvYGBgXFxzKi9nLCBcIlwiKS50cmltKCk7XG4gICAgICAgICAgICBjb25zdCByZWxhdGlvbnNoaXBzID0gSlNPTi5wYXJzZShjbGVhbmVkKTtcblxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVsYXRpb25zaGlwcykpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCByZWwgb2YgcmVsYXRpb25zaGlwcykge1xuICAgICAgICAgICAgICAgIGlmICghcmVsLnN1YmplY3QgfHwgIXJlbC5wcmVkaWNhdGUgfHwgIXJlbC5vYmplY3QpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmICghQUxMT1dFRF9QUkVESUNBVEVTLmluY2x1ZGVzKHJlbC5wcmVkaWNhdGUpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YmplY3ROYW1lID0gbm9ybWFsaXplRW50aXR5TmFtZShyZWwuc3ViamVjdCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0TmFtZSA9IG5vcm1hbGl6ZUVudGl0eU5hbWUocmVsLm9iamVjdCk7XG4gICAgICAgICAgICAgICAgaWYgKCFzdWJqZWN0TmFtZSB8fCAhb2JqZWN0TmFtZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdWJqZWN0U2x1ZyA9IHN1YmplY3ROYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoL1xccysvZywgXCItXCIpLnJlcGxhY2UoL1teYS16MC05LV0vZywgXCJcIikucmVwbGFjZSgvLSsvZywgXCItXCIpLnJlcGxhY2UoL14tfC0kL2csIFwiXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdFNsdWcgPSBvYmplY3ROYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoL1xccysvZywgXCItXCIpLnJlcGxhY2UoL1teYS16MC05LV0vZywgXCJcIikucmVwbGFjZSgvLSsvZywgXCItXCIpLnJlcGxhY2UoL14tfC0kL2csIFwiXCIpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgW3N1YmplY3RSZXMsIG9iamVjdFJlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICBzdXBhYmFzZS5mcm9tKFwiZW50aXRpZXNcIikuc2VsZWN0KFwiaWRcIikuZXEoXCJzbHVnXCIsIHN1YmplY3RTbHVnKS5saW1pdCgxKS5zaW5nbGUoKSxcbiAgICAgICAgICAgICAgICAgIHN1cGFiYXNlLmZyb20oXCJlbnRpdGllc1wiKS5zZWxlY3QoXCJpZFwiKS5lcShcInNsdWdcIiwgb2JqZWN0U2x1ZykubGltaXQoMSkuc2luZ2xlKCksXG4gICAgICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXN1YmplY3RSZXMuZGF0YSB8fCAhb2JqZWN0UmVzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIltpbmdlc3RdIFJlbGF0aW9uc2hpcCBlbnRpdHkgbm90IGZvdW5kOlwiLCBzdWJqZWN0TmFtZSwgXCJvclwiLCBvYmplY3ROYW1lKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YmplY3RJZCA9IHN1YmplY3RSZXMuZGF0YS5pZDtcbiAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RJZCA9IG9iamVjdFJlcy5kYXRhLmlkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZGVuY2UgPSB0eXBlb2YgcmVsLmNvbmZpZGVuY2UgPT09IFwibnVtYmVyXCIgPyBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCByZWwuY29uZmlkZW5jZSkpIDogMC43O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1JlbCB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgICAgIC5mcm9tKFwiZW50aXR5X3JlbGF0aW9uc2hpcHNcIilcbiAgICAgICAgICAgICAgICAgIC5zZWxlY3QoXCJpZFwiKVxuICAgICAgICAgICAgICAgICAgLmVxKFwic3ViamVjdF9pZFwiLCBzdWJqZWN0SWQpXG4gICAgICAgICAgICAgICAgICAuZXEoXCJvYmplY3RfaWRcIiwgb2JqZWN0SWQpXG4gICAgICAgICAgICAgICAgICAuZXEoXCJwcmVkaWNhdGVcIiwgcmVsLnByZWRpY2F0ZSlcbiAgICAgICAgICAgICAgICAgIC5lcShcInNvdXJjZV91cmxcIiwgdXJsKVxuICAgICAgICAgICAgICAgICAgLmxpbWl0KDEpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUmVsICYmIGV4aXN0aW5nUmVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW2luZ2VzdF0gUmVsYXRpb25zaGlwIGFscmVhZHkgZXhpc3RzOlwiLCBzdWJqZWN0TmFtZSwgcmVsLnByZWRpY2F0ZSwgb2JqZWN0TmFtZSk7XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IGVycm9yOiByZWxJbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgICAgIC5mcm9tKFwiZW50aXR5X3JlbGF0aW9uc2hpcHNcIilcbiAgICAgICAgICAgICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgICAgICAgICAgICBzdWJqZWN0X2lkOiBzdWJqZWN0SWQsXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdF9pZDogb2JqZWN0SWQsXG4gICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogcmVsLnByZWRpY2F0ZSxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlX3VybDogdXJsLFxuICAgICAgICAgICAgICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVsSW5zZXJ0RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbaW5nZXN0XSBSZWxhdGlvbnNoaXAgaW5zZXJ0IGZhaWxlZDpcIiwgcmVsSW5zZXJ0RXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW2luZ2VzdF0gUmVsYXRpb25zaGlwIGNyZWF0ZWQ6XCIsIHN1YmplY3ROYW1lLCByZWwucHJlZGljYXRlLCBvYmplY3ROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHJlbEVycjogYW55KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIltpbmdlc3RdIFJlbGF0aW9uc2hpcCBleHRyYWN0aW9uIGZhaWxlZDpcIiwgcmVsRXJyLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXG4gICAgICBcIltpbmdlc3RdIHRpbWVsaW5lX2V2ZW50IHJhdyBvYmplY3Q6XCIsXG4gICAgICBKU09OLnN0cmluZ2lmeShwYXJzZWQudGltZWxpbmVfZXZlbnQsIG51bGwsIDIpXG4gICAgKTtcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwiW2luZ2VzdF0gcmF3IGV2ZW50X3R5cGU6XCIsXG4gICAgICBwYXJzZWQudGltZWxpbmVfZXZlbnQ/LmV2ZW50X3R5cGVcbiAgICApO1xuXG4gICAgY29uc3QgQUxMT1dFRF9FVkVOVF9UWVBFUyA9IFtcbiAgICAgIFwicmVsZWFzZVwiLFxuICAgICAgXCJ1cGdyYWRlXCIsXG4gICAgICBcInNlY3VyaXR5XCIsXG4gICAgICBcInJlZ3VsYXRpb25cIixcbiAgICAgIFwiZnVuZGluZ1wiLFxuICAgICAgXCJwYXJ0bmVyc2hpcFwiLFxuICAgICAgXCJsZWFkZXJzaGlwXCIsXG4gICAgICBcInJlc2VhcmNoXCIsXG4gICAgICBcImluZnJhc3RydWN0dXJlXCIsXG4gICAgICBcIm90aGVyXCJcbiAgICBdO1xuXG4gICAgY29uc3QgRVZFTlRfVFlQRV9LRVlXT1JEX01BUDogW3N0cmluZywgc3RyaW5nXVtdID0gW1xuICAgICAgW1wicmVsZWFzZVwiLCBcInJlbGVhc2VcIl0sXG4gICAgICBbXCJsYXVuY2hcIiwgXCJyZWxlYXNlXCJdLFxuICAgICAgW1widXBncmFkZVwiLCBcInVwZ3JhZGVcIl0sXG4gICAgICBbXCJ1cGRhdGVcIiwgXCJ1cGdyYWRlXCJdLFxuICAgICAgW1wic2VjdXJpdHlcIiwgXCJzZWN1cml0eVwiXSxcbiAgICAgIFtcImJyZWFjaFwiLCBcInNlY3VyaXR5XCJdLFxuICAgICAgW1wicmVndWxhdGlvblwiLCBcInJlZ3VsYXRpb25cIl0sXG4gICAgICBbXCJwb2xpY3lcIiwgXCJyZWd1bGF0aW9uXCJdLFxuICAgICAgW1wiZ292ZXJubWVudFwiLCBcInJlZ3VsYXRpb25cIl0sXG4gICAgICBbXCJmdW5kaW5nXCIsIFwiZnVuZGluZ1wiXSxcbiAgICAgIFtcImludmVzdG1lbnRcIiwgXCJmdW5kaW5nXCJdLFxuICAgICAgW1wicGFydG5lcnNoaXBcIiwgXCJwYXJ0bmVyc2hpcFwiXSxcbiAgICAgIFtcImNvbGxhYm9yYXRpb25cIiwgXCJwYXJ0bmVyc2hpcFwiXSxcbiAgICAgIFtcImxlYWRlcnNoaXBcIiwgXCJsZWFkZXJzaGlwXCJdLFxuICAgICAgW1wiY2VvXCIsIFwibGVhZGVyc2hpcFwiXSxcbiAgICAgIFtcInJlc2VhcmNoXCIsIFwicmVzZWFyY2hcIl0sXG4gICAgICBbXCJwYXBlclwiLCBcInJlc2VhcmNoXCJdLFxuICAgICAgW1wiaW5mcmFzdHJ1Y3R1cmVcIiwgXCJpbmZyYXN0cnVjdHVyZVwiXSxcbiAgICAgIFtcImRhdGEgY2VudGVyXCIsIFwiaW5mcmFzdHJ1Y3R1cmVcIl0sXG4gICAgXTtcblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50VHlwZShyYXc6IHN0cmluZyB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XG4gICAgICBpZiAoIXJhdykgcmV0dXJuIFwib3RoZXJcIjtcbiAgICAgIGNvbnN0IGxvd2VyID0gcmF3LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgaWYgKEFMTE9XRURfRVZFTlRfVFlQRVMuaW5jbHVkZXMobG93ZXIpKSByZXR1cm4gbG93ZXI7XG4gICAgICBmb3IgKGNvbnN0IFtrZXl3b3JkLCBtYXBwZWRdIG9mIEVWRU5UX1RZUEVfS0VZV09SRF9NQVApIHtcbiAgICAgICAgaWYgKGxvd2VyLmluY2x1ZGVzKGtleXdvcmQpKSByZXR1cm4gbWFwcGVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwib3RoZXJcIjtcbiAgICB9XG5cbiAgICBpZiAocGFyc2VkLnRpbWVsaW5lX2V2ZW50ICYmIHBhcnNlZC50aW1lbGluZV9ldmVudC5lbnRpdHkpIHtcbiAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IG5vcm1hbGl6ZUV2ZW50VHlwZShwYXJzZWQudGltZWxpbmVfZXZlbnQuZXZlbnRfdHlwZSk7XG5cbiAgICAgIGNvbnN0IHRpbWVsaW5lRW50aXR5TmFtZSA9IHBhcnNlZC50aW1lbGluZV9ldmVudC5lbnRpdHk7XG4gICAgICBjb25zdCB0aW1lbGluZUVudGl0eVNsdWcgPSB0aW1lbGluZUVudGl0eU5hbWVcbiAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgLnRyaW0oKVxuICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcbiAgICAgICAgLnJlcGxhY2UoL1teYS16MC05LV0vZywgXCJcIilcbiAgICAgICAgLnJlcGxhY2UoLy0rL2csIFwiLVwiKVxuICAgICAgICAucmVwbGFjZSgvXi18LSQvZywgXCJcIik7XG5cbiAgICAgIGNvbnN0IHsgZGF0YTogdGltZWxpbmVFbnRpdHkgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiZW50aXRpZXNcIilcbiAgICAgICAgLnNlbGVjdChcImlkXCIpXG4gICAgICAgIC5lcShcInNsdWdcIiwgdGltZWxpbmVFbnRpdHlTbHVnKVxuICAgICAgICAubGltaXQoMSlcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBpZiAodGltZWxpbmVFbnRpdHkpIHtcbiAgICAgICAgY29uc3QgeyBlcnJvcjogdGltZWxpbmVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbShcInRpbWVsaW5lc1wiKVxuICAgICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgICAgZW50aXR5OiB0aW1lbGluZUVudGl0eS5pZCxcbiAgICAgICAgICAgIHRpdGxlOiBwYXJzZWQudGltZWxpbmVfZXZlbnQudGl0bGUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogcGFyc2VkLnRpbWVsaW5lX2V2ZW50LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgZXZlbnRfZGF0ZTogcGFyc2VkLnRpbWVsaW5lX2V2ZW50LmRhdGUsXG4gICAgICAgICAgICBldmVudF90eXBlOiBldmVudFR5cGUsXG4gICAgICAgICAgICBzb3VyY2VfdXJsOiB1cmwsXG4gICAgICAgICAgICBjb25maWRlbmNlOiAwLjg1LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aW1lbGluZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlRpbWVsaW5lIGluc2VydCBmYWlsZWQ6XCIsIHRpbWVsaW5lRXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIltpbmdlc3RdIFRpbWVsaW5lIGVudGl0eSBub3QgZm91bmQgaW4gREI6XCIsIHRpbWVsaW5lRW50aXR5TmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgbG9nSW5nZXN0aW9uKHVybCwgXCJzdWNjZXNzXCIsIHN0YXJ0VGltZSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHNsdWcsXG4gICAgICBhcnRpY2xlX2lkOiBhcnRpY2xlRGF0YS5pZCxcbiAgICAgIGVudGl0aWVzOiBwYXJzZWQuZW50aXRpZXMgfHwgW10sXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihcIkluZ2VzdCBlcnJvcjpcIiwgZXJyKTtcbiAgICBjb25zdCBzb3VyY2VVcmwgPSAoZXJyIGFzIGFueSk/Ll9zb3VyY2VVcmwgfHwgXCJ1bmtub3duXCI7XG4gICAgYXdhaXQgbG9nSW5nZXN0aW9uKHNvdXJjZVVybCwgXCJpbnRlcm5hbF9lcnJvclwiLCBzdGFydFRpbWUsIGVyci5tZXNzYWdlIHx8IFwiVW5rbm93biBlcnJvclwiKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzdXBhYmFzZSIsImFudGhyb3BpY0NsaWVudCIsIkFOVEhST1BJQ19BUElfS0VZIiwiU1lTVEVNX1BST01QVCIsImNoZWNrQXV0aCIsInJlcXVlc3QiLCJhZG1pbkF1dGgiLCJjb29raWVzIiwiZ2V0IiwidmFsdWUiLCJhZG1pblNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJBRE1JTl9TRUNSRVQiLCJnZW5lcmF0ZVNsdWciLCJ0aXRsZSIsInRvTG93ZXJDYXNlIiwidHJpbSIsInJlcGxhY2UiLCJzbGljZSIsImdldFVuaXF1ZVNsdWciLCJiYXNlU2x1ZyIsImRhdGEiLCJmcm9tIiwic2VsZWN0IiwibGlrZSIsImxlbmd0aCIsImV4aXN0aW5nIiwiU2V0IiwibWFwIiwicm93Iiwic2x1ZyIsImhhcyIsImNvdW50ZXIiLCJzdHJpcEh0bWwiLCJodG1sIiwidGV4dCIsImxvZ0luZ2VzdGlvbiIsInNvdXJjZV91cmwiLCJzdGF0dXMiLCJzdGFydFRpbWUiLCJlcnJvcl9tZXNzYWdlIiwiaW5zZXJ0IiwicHJvY2Vzc2luZ190aW1lX21zIiwiRGF0ZSIsIm5vdyIsImNvbnNvbGUiLCJsb2ciLCJlIiwiZXJyb3IiLCJQT1NUIiwianNvbiIsInN1Y2Nlc3MiLCJib2R5IiwidXJsIiwiVVJMIiwiZXEiLCJsaW1pdCIsImR1cGxpY2F0ZSIsImV4aXN0aW5nX2lkIiwiaWQiLCJmZXRjaFJlcyIsImZldGNoU3RhcnQiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dElkIiwic2V0VGltZW91dCIsImFib3J0IiwiZmV0Y2giLCJoZWFkZXJzIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0IiwiZXJyIiwiZmV0Y2hEdXJhdGlvbiIsIm5hbWUiLCJtZXNzYWdlIiwib2siLCJlcnJNc2ciLCJzdGF0dXNUZXh0IiwiY29udGVudFR5cGUiLCJpbmNsdWRlcyIsImNsZWFuZWRUZXh0Iiwid2FybiIsImFpUmF3IiwicmVzcG9uc2UiLCJwb3N0IiwibW9kZWwiLCJtYXhfdG9rZW5zIiwic3lzdGVtIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsIm1zZyIsInBhcnNlZCIsImNsZWFuZWQiLCJKU09OIiwicGFyc2UiLCJhcnRpY2xlSW5zZXJ0IiwicHVibGlzaF9hdCIsInRvSVNPU3RyaW5nIiwiYXJ0aWNsZURhdGEiLCJhcnRpY2xlRXJyb3IiLCJzaW5nbGUiLCJzdHJpbmdpZnkiLCJBTExPV0VEX0VOVElUWV9UWVBFUyIsIkdFTkVSSUNfRU5USVRZX0JMT0NLTElTVCIsIkFJX0NBVEVHT1JJRVMiLCJBSV9LRVlXT1JEUyIsIkVWRU5UX0tFWVdPUkRTIiwiSU5TVElUVVRJT05fS0VZV09SRFMiLCJSRUpFQ1RFRF9QQVRURVJOUyIsInBhc3Nlc0NvbnRleHR1YWxGaWx0ZXIiLCJlbnRpdHkiLCJhcnRpY2xlQ2F0ZWdvcnkiLCJhcnRpY2xlQ29udGVudCIsIm5hbWVMb3dlciIsInRlc3QiLCJ0eXBlIiwiQ09SUE9SQVRFX1NVRkZJWEVTIiwibm9ybWFsaXplRW50aXR5TmFtZSIsInJhdyIsImMiLCJ0b1VwcGVyQ2FzZSIsImZpcnN0Q29tcGFueUlkIiwibW9kZWxFbnRpdHlJZHMiLCJlbnRpdGllcyIsIkFycmF5IiwiaXNBcnJheSIsImNhdGVnb3J5IiwiZW50aXR5TmFtZSIsImVudGl0eVNsdWciLCJleGlzdGluZ0VudGl0eSIsImVudGl0eUlkIiwibmV3RW50aXR5IiwiaW5zZXJ0RW50aXR5RXJyb3IiLCJwdXNoIiwibGlua0Vycm9yIiwidXBzZXJ0IiwiYXJ0aWNsZV9pZCIsImVudGl0eV9pZCIsIm9uQ29uZmxpY3QiLCJ1cGRhdGVSZXN1bHQiLCJwYXJlbnRFcnJvciIsInVwZGF0ZSIsInBhcmVudF9pZCIsImluIiwiaXMiLCJtb2RlbElkIiwiZXhpc3RpbmdUaW1lbGluZSIsImZhbGxiYWNrRXJyb3IiLCJldmVudF90eXBlIiwiZXZlbnRfZGF0ZSIsImRlc2NyaXB0aW9uIiwiZXhpc3RpbmdFbnQiLCJzdW1tYXJ5Iiwic3VtbWFyeVJlc3BvbnNlIiwic3VtbWFyeVRleHQiLCJzdW1tYXJ5VXBkYXRlRXJyb3IiLCJzdW1tYXJ5RXJyIiwiQUxMT1dFRF9QUkVESUNBVEVTIiwiZW50aXR5TmFtZXMiLCJmaWx0ZXIiLCJCb29sZWFuIiwicmVsUHJvbXB0Iiwiam9pbiIsInJlbFJlc3BvbnNlIiwicmVsUmF3IiwicmVsYXRpb25zaGlwcyIsInJlbCIsInN1YmplY3QiLCJwcmVkaWNhdGUiLCJvYmplY3QiLCJzdWJqZWN0TmFtZSIsIm9iamVjdE5hbWUiLCJzdWJqZWN0U2x1ZyIsIm9iamVjdFNsdWciLCJzdWJqZWN0UmVzIiwib2JqZWN0UmVzIiwiUHJvbWlzZSIsImFsbCIsInN1YmplY3RJZCIsIm9iamVjdElkIiwiY29uZmlkZW5jZSIsIk1hdGgiLCJtaW4iLCJtYXgiLCJleGlzdGluZ1JlbCIsInJlbEluc2VydEVycm9yIiwic3ViamVjdF9pZCIsIm9iamVjdF9pZCIsInJlbEVyciIsInRpbWVsaW5lX2V2ZW50IiwiQUxMT1dFRF9FVkVOVF9UWVBFUyIsIkVWRU5UX1RZUEVfS0VZV09SRF9NQVAiLCJub3JtYWxpemVFdmVudFR5cGUiLCJsb3dlciIsImtleXdvcmQiLCJtYXBwZWQiLCJldmVudFR5cGUiLCJ0aW1lbGluZUVudGl0eU5hbWUiLCJ0aW1lbGluZUVudGl0eVNsdWciLCJ0aW1lbGluZUVudGl0eSIsInRpbWVsaW5lRXJyb3IiLCJkYXRlIiwic291cmNlVXJsIiwiX3NvdXJjZVVybCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ingest/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/anthropic.ts":
/*!******************************!*\
  !*** ./src/lib/anthropic.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANTHROPIC_API_KEY: () => (/* binding */ ANTHROPIC_API_KEY),\n/* harmony export */   anthropicClient: () => (/* binding */ anthropicClient)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\nconst ANTHROPIC_API_KEY = process.env.ANTHROPIC_API_KEY;\nconst anthropicClient = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create({\n    baseURL: \"https://api.anthropic.com/v1\",\n    headers: {\n        \"x-api-key\": ANTHROPIC_API_KEY || \"\",\n        \"anthropic-version\": \"2023-06-01\",\n        \"Content-Type\": \"application/json\"\n    }\n});\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FudGhyb3BpYy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEI7QUFFMUIsTUFBTUMsb0JBQW9CQyxRQUFRQyxHQUFHLENBQUNGLGlCQUFpQjtBQUV2RCxNQUFNRyxrQkFBa0JKLDZDQUFLQSxDQUFDSyxNQUFNLENBQUM7SUFDbkNDLFNBQVM7SUFDVEMsU0FBUztRQUNQLGFBQWFOLHFCQUFxQjtRQUNsQyxxQkFBcUI7UUFDckIsZ0JBQWdCO0lBQ2xCO0FBQ0Y7QUFFOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waGVub21lbnktcmV2aWV3Ly4vc3JjL2xpYi9hbnRocm9waWMudHM/ZDA4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XG5cbmNvbnN0IEFOVEhST1BJQ19BUElfS0VZID0gcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVk7XG5cbmNvbnN0IGFudGhyb3BpY0NsaWVudCA9IGF4aW9zLmNyZWF0ZSh7XG4gIGJhc2VVUkw6IFwiaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgXCJ4LWFwaS1rZXlcIjogQU5USFJPUElDX0FQSV9LRVkgfHwgXCJcIixcbiAgICBcImFudGhyb3BpYy12ZXJzaW9uXCI6IFwiMjAyMy0wNi0wMVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmV4cG9ydCB7IGFudGhyb3BpY0NsaWVudCwgQU5USFJPUElDX0FQSV9LRVkgfTtcbiJdLCJuYW1lcyI6WyJheGlvcyIsIkFOVEhST1BJQ19BUElfS0VZIiwicHJvY2VzcyIsImVudiIsImFudGhyb3BpY0NsaWVudCIsImNyZWF0ZSIsImJhc2VVUkwiLCJoZWFkZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/anthropic.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\nconst supabaseUrl = \"https://koiyuurunlamocjlrjbv.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtvaXl1dXJ1bmxhbW9jamxyamJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3Njg2NjYsImV4cCI6MjA4NzM0NDY2Nn0.cJC7cut-gRcK5E0wGUq9ieRCaB8mIYxQyx8qOzxLUl8\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRXJELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxrQkFBa0JILGtOQUF5QztBQUUxRCxNQUFNSyxXQUFXUCxtRUFBWUEsQ0FBQ0MsYUFBYUksaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhlbm9tZW55LXJldmlldy8uL3NyYy9saWIvc3VwYWJhc2UudHM/MDZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMITtcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZITtcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/axios","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/form-data","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/follow-redirects","vendor-chunks/proxy-from-env","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/get-intrinsic","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fingest%2Froute&page=%2Fapi%2Fingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fingest%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();