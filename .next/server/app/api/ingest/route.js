/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ingest/route";
exports.ids = ["app/api/ingest/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?4c03":
/*!***********************!*\
  !*** debug (ignored) ***!
  \***********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fingest%2Froute&page=%2Fapi%2Fingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fingest%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fingest%2Froute&page=%2Fapi%2Fingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fingest%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_src_app_api_ingest_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ingest/route.ts */ \"(rsc)/./src/app/api/ingest/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ingest/route\",\n        pathname: \"/api/ingest\",\n        filename: \"route\",\n        bundlePath: \"app/api/ingest/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/src/app/api/ingest/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_src_app_api_ingest_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ingest/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbmdlc3QlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmluZ2VzdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmluZ2VzdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3BoZW5vbWVueS1yZXZpZXcvP2QxNDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9zcmMvYXBwL2FwaS9pbmdlc3Qvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9pbmdlc3Qvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9pbmdlc3RcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2luZ2VzdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3J1bm5lci93b3Jrc3BhY2Uvc3JjL2FwcC9hcGkvaW5nZXN0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9pbmdlc3Qvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fingest%2Froute&page=%2Fapi%2Fingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fingest%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/ingest/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/ingest/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_anthropic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/anthropic */ \"(rsc)/./src/lib/anthropic.ts\");\n\n\n\nconst SYSTEM_PROMPT = `\nYou are an intelligence analysis engine.\n\nRewrite the provided article into a neutral, analytical intelligence brief.\n\nRemove marketing tone.\nNo hype.\nTechnical significance.\nGeopolitical impact.\n\nSelect category strictly from:\n\nAI\nAI Governance\nAI Operations\nQuantum\nSpace\nBiotech\nIndia–China\nUSA Europe\nIntelligence Brief\n\nReturn STRICT JSON ONLY:\n\n{\n  \"title\": \"\",\n  \"content\": \"\",\n  \"summary\": \"\",\n  \"category\": \"\",\n  \"timeline_event\": {\n    \"entity\": \"\",\n    \"date\": \"\",\n    \"title\": \"\",\n    \"description\": \"\"\n  }\n}\n\nIf no timeline_event exists, return null.\nNo markdown.\nNo commentary.\nOnly valid JSON.\n`;\nfunction checkAuth(request) {\n    const adminAuth = request.cookies.get(\"admin-auth\")?.value;\n    const adminSecret = process.env.ADMIN_SECRET;\n    return !!adminSecret && adminAuth === adminSecret;\n}\nfunction generateSlug(title) {\n    return title.toLowerCase().trim().replace(/[^a-z0-9\\s-]/g, \"\").replace(/\\s+/g, \"-\").replace(/-+/g, \"-\").replace(/^-|-$/g, \"\").slice(0, 80);\n}\nasync function getUniqueSlug(baseSlug) {\n    const { data } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"articles\").select(\"slug\").like(\"slug\", `${baseSlug}%`);\n    if (!data || data.length === 0) return baseSlug;\n    const existing = new Set(data.map((row)=>row.slug));\n    if (!existing.has(baseSlug)) return baseSlug;\n    let counter = 2;\n    while(existing.has(`${baseSlug}-${counter}`))counter++;\n    return `${baseSlug}-${counter}`;\n}\nfunction stripHtml(html) {\n    let text = html;\n    text = text.replace(/<script[\\s\\S]*?<\\/script>/gi, \"\");\n    text = text.replace(/<style[\\s\\S]*?<\\/style>/gi, \"\");\n    text = text.replace(/<nav[\\s\\S]*?<\\/nav>/gi, \"\");\n    text = text.replace(/<footer[\\s\\S]*?<\\/footer>/gi, \"\");\n    text = text.replace(/<header[\\s\\S]*?<\\/header>/gi, \"\");\n    text = text.replace(/<aside[\\s\\S]*?<\\/aside>/gi, \"\");\n    text = text.replace(/<iframe[\\s\\S]*?<\\/iframe>/gi, \"\");\n    text = text.replace(/<noscript[\\s\\S]*?<\\/noscript>/gi, \"\");\n    text = text.replace(/<[^>]+>/g, \" \");\n    text = text.replace(/&nbsp;/g, \" \");\n    text = text.replace(/&amp;/g, \"&\");\n    text = text.replace(/&lt;/g, \"<\");\n    text = text.replace(/&gt;/g, \">\");\n    text = text.replace(/&quot;/g, '\"');\n    text = text.replace(/&#39;/g, \"'\");\n    text = text.replace(/\\s+/g, \" \");\n    return text.trim();\n}\nasync function POST(request) {\n    try {\n        if (!checkAuth(request)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Unauthorized.\"\n            }, {\n                status: 401\n            });\n        }\n        let body;\n        try {\n            body = await request.json();\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid JSON body.\"\n            }, {\n                status: 400\n            });\n        }\n        const { url } = body;\n        if (!url || typeof url !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"url is required.\"\n            }, {\n                status: 400\n            });\n        }\n        try {\n            new URL(url);\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid URL format.\"\n            }, {\n                status: 400\n            });\n        }\n        const { data: existing } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"articles\").select(\"id, title\").eq(\"source_url\", url).limit(1);\n        if (existing && existing.length > 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `Already ingested: \"${existing[0].title}\"`,\n                duplicate: true,\n                existing_id: existing[0].id\n            }, {\n                status: 409\n            });\n        }\n        let fetchRes;\n        try {\n            fetchRes = await fetch(url, {\n                headers: {\n                    \"User-Agent\": \"Mozilla/5.0 (compatible; PhenomenyBot/1.0)\",\n                    \"Accept\": \"text/html,application/xhtml+xml\"\n                },\n                signal: AbortSignal.timeout(15000)\n            });\n        } catch (err) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `Failed to fetch URL: ${err.message}`\n            }, {\n                status: 400\n            });\n        }\n        if (!fetchRes.ok) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `URL returned ${fetchRes.status} ${fetchRes.statusText}`\n            }, {\n                status: 400\n            });\n        }\n        const html = await fetchRes.text();\n        const cleanedText = stripHtml(html).slice(0, 15000);\n        if (cleanedText.length < 100) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Extracted text too short — possibly paywalled or empty page.\"\n            }, {\n                status: 422\n            });\n        }\n        if (!_lib_anthropic__WEBPACK_IMPORTED_MODULE_2__.ANTHROPIC_API_KEY) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"ANTHROPIC_API_KEY is not configured.\"\n            }, {\n                status: 500\n            });\n        }\n        let aiRaw;\n        try {\n            const response = await _lib_anthropic__WEBPACK_IMPORTED_MODULE_2__.anthropicClient.post(\"/messages\", {\n                model: \"claude-sonnet-4-20250514\",\n                max_tokens: 2000,\n                system: SYSTEM_PROMPT,\n                messages: [\n                    {\n                        role: \"user\",\n                        content: cleanedText\n                    }\n                ]\n            });\n            aiRaw = response.data?.content?.[0]?.text;\n            if (!aiRaw) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Empty response from Anthropic.\"\n                }, {\n                    status: 500\n                });\n            }\n        } catch (err) {\n            const msg = err.response?.data?.error?.message || err.message || \"Unknown Anthropic error\";\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `AI request failed: ${msg}`\n            }, {\n                status: 500\n            });\n        }\n        let parsed;\n        try {\n            const cleaned = aiRaw.replace(/```json\\s*/g, \"\").replace(/```\\s*/g, \"\").trim();\n            parsed = JSON.parse(cleaned);\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Failed to parse AI response as JSON.\"\n            }, {\n                status: 500\n            });\n        }\n        if (!parsed.title || !parsed.content) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"AI response missing required title or content.\"\n            }, {\n                status: 500\n            });\n        }\n        const baseSlug = generateSlug(parsed.title);\n        const slug = await getUniqueSlug(baseSlug);\n        const { data: articleData, error: articleError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"articles\").insert({\n            title: parsed.title,\n            content: parsed.content,\n            slug,\n            status: \"published\",\n            publish_at: new Date().toISOString(),\n            category: parsed.category || null,\n            source_url: url\n        }).select(\"id\").single();\n        if (articleError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: `Article insert failed: ${articleError.message}`\n            }, {\n                status: 500\n            });\n        }\n        if (parsed.timeline_event && parsed.timeline_event.entity) {\n            const { error: timelineError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"timelines\").insert({\n                entity: parsed.timeline_event.entity,\n                title: parsed.timeline_event.title,\n                description: parsed.timeline_event.description,\n                event_date: parsed.timeline_event.date,\n                source_url: url,\n                confidence: 0.85\n            });\n            if (timelineError) {\n                console.error(\"Timeline insert failed:\", timelineError.message);\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            slug,\n            article_id: articleData.id\n        });\n    } catch (err) {\n        console.error(\"Ingest error:\", err);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Internal server error.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9pbmdlc3Qvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUNkO0FBQzJCO0FBRXJFLE1BQU1JLGdCQUFnQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlDdkIsQ0FBQztBQUVELFNBQVNDLFVBQVVDLE9BQW9CO0lBQ3JDLE1BQU1DLFlBQVlELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGVBQWVDO0lBQ3JELE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0MsWUFBWTtJQUM1QyxPQUFPLENBQUMsQ0FBQ0gsZUFBZUosY0FBY0k7QUFDeEM7QUFFQSxTQUFTSSxhQUFhQyxLQUFhO0lBQ2pDLE9BQU9BLE1BQ0pDLFdBQVcsR0FDWEMsSUFBSSxHQUNKQyxPQUFPLENBQUMsaUJBQWlCLElBQ3pCQSxPQUFPLENBQUMsUUFBUSxLQUNoQkEsT0FBTyxDQUFDLE9BQU8sS0FDZkEsT0FBTyxDQUFDLFVBQVUsSUFDbEJDLEtBQUssQ0FBQyxHQUFHO0FBQ2Q7QUFFQSxlQUFlQyxjQUFjQyxRQUFnQjtJQUMzQyxNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHLE1BQU10QixtREFBUUEsQ0FDNUJ1QixJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLFFBQ1BDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRUosU0FBUyxDQUFDLENBQUM7SUFFOUIsSUFBSSxDQUFDQyxRQUFRQSxLQUFLSSxNQUFNLEtBQUssR0FBRyxPQUFPTDtJQUV2QyxNQUFNTSxXQUFXLElBQUlDLElBQUlOLEtBQUtPLEdBQUcsQ0FBQyxDQUFDQyxNQUEwQkEsSUFBSUMsSUFBSTtJQUNyRSxJQUFJLENBQUNKLFNBQVNLLEdBQUcsQ0FBQ1gsV0FBVyxPQUFPQTtJQUVwQyxJQUFJWSxVQUFVO0lBQ2QsTUFBT04sU0FBU0ssR0FBRyxDQUFDLENBQUMsRUFBRVgsU0FBUyxDQUFDLEVBQUVZLFFBQVEsQ0FBQyxFQUFHQTtJQUMvQyxPQUFPLENBQUMsRUFBRVosU0FBUyxDQUFDLEVBQUVZLFFBQVEsQ0FBQztBQUNqQztBQUVBLFNBQVNDLFVBQVVDLElBQVk7SUFDN0IsSUFBSUMsT0FBT0Q7SUFDWEMsT0FBT0EsS0FBS2xCLE9BQU8sQ0FBQywrQkFBK0I7SUFDbkRrQixPQUFPQSxLQUFLbEIsT0FBTyxDQUFDLDZCQUE2QjtJQUNqRGtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMseUJBQXlCO0lBQzdDa0IsT0FBT0EsS0FBS2xCLE9BQU8sQ0FBQywrQkFBK0I7SUFDbkRrQixPQUFPQSxLQUFLbEIsT0FBTyxDQUFDLCtCQUErQjtJQUNuRGtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsNkJBQTZCO0lBQ2pEa0IsT0FBT0EsS0FBS2xCLE9BQU8sQ0FBQywrQkFBK0I7SUFDbkRrQixPQUFPQSxLQUFLbEIsT0FBTyxDQUFDLG1DQUFtQztJQUN2RGtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsWUFBWTtJQUNoQ2tCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsV0FBVztJQUMvQmtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsVUFBVTtJQUM5QmtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsU0FBUztJQUM3QmtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsU0FBUztJQUM3QmtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsV0FBVztJQUMvQmtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsVUFBVTtJQUM5QmtCLE9BQU9BLEtBQUtsQixPQUFPLENBQUMsUUFBUTtJQUM1QixPQUFPa0IsS0FBS25CLElBQUk7QUFDbEI7QUFlTyxlQUFlb0IsS0FBS2hDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixJQUFJLENBQUNELFVBQVVDLFVBQVU7WUFDdkIsT0FBT04scURBQVlBLENBQUN1QyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU87WUFBZ0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3JGO1FBRUEsSUFBSUM7UUFDSixJQUFJO1lBQ0ZBLE9BQU8sTUFBTXJDLFFBQVFpQyxJQUFJO1FBQzNCLEVBQUUsT0FBTTtZQUNOLE9BQU92QyxxREFBWUEsQ0FBQ3VDLElBQUksQ0FBQztnQkFBRUMsU0FBUztnQkFBT0MsT0FBTztZQUFxQixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDMUY7UUFFQSxNQUFNLEVBQUVFLEdBQUcsRUFBRSxHQUFHRDtRQUNoQixJQUFJLENBQUNDLE9BQU8sT0FBT0EsUUFBUSxVQUFVO1lBQ25DLE9BQU81QyxxREFBWUEsQ0FBQ3VDLElBQUksQ0FBQztnQkFBRUMsU0FBUztnQkFBT0MsT0FBTztZQUFtQixHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDeEY7UUFFQSxJQUFJO1lBQ0YsSUFBSUcsSUFBSUQ7UUFDVixFQUFFLE9BQU07WUFDTixPQUFPNUMscURBQVlBLENBQUN1QyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU87WUFBc0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzNGO1FBRUEsTUFBTSxFQUFFbkIsTUFBTUssUUFBUSxFQUFFLEdBQUcsTUFBTTNCLG1EQUFRQSxDQUN0Q3VCLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMsYUFDUHFCLEVBQUUsQ0FBQyxjQUFjRixLQUNqQkcsS0FBSyxDQUFDO1FBRVQsSUFBSW5CLFlBQVlBLFNBQVNELE1BQU0sR0FBRyxHQUFHO1lBQ25DLE9BQU8zQixxREFBWUEsQ0FBQ3VDLElBQUksQ0FDdEI7Z0JBQ0VDLFNBQVM7Z0JBQ1RDLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRWIsUUFBUSxDQUFDLEVBQUUsQ0FBQ1osS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDakRnQyxXQUFXO2dCQUNYQyxhQUFhckIsUUFBUSxDQUFDLEVBQUUsQ0FBQ3NCLEVBQUU7WUFDN0IsR0FDQTtnQkFBRVIsUUFBUTtZQUFJO1FBRWxCO1FBRUEsSUFBSVM7UUFDSixJQUFJO1lBQ0ZBLFdBQVcsTUFBTUMsTUFBTVIsS0FBSztnQkFDMUJTLFNBQVM7b0JBQ1AsY0FBYztvQkFDZCxVQUFVO2dCQUNaO2dCQUNBQyxRQUFRQyxZQUFZQyxPQUFPLENBQUM7WUFDOUI7UUFDRixFQUFFLE9BQU9DLEtBQVU7WUFDakIsT0FBT3pELHFEQUFZQSxDQUFDdUMsSUFBSSxDQUN0QjtnQkFBRUMsU0FBUztnQkFBT0MsT0FBTyxDQUFDLHFCQUFxQixFQUFFZ0IsSUFBSUMsT0FBTyxDQUFDLENBQUM7WUFBQyxHQUMvRDtnQkFBRWhCLFFBQVE7WUFBSTtRQUVsQjtRQUVBLElBQUksQ0FBQ1MsU0FBU1EsRUFBRSxFQUFFO1lBQ2hCLE9BQU8zRCxxREFBWUEsQ0FBQ3VDLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU8sQ0FBQyxhQUFhLEVBQUVVLFNBQVNULE1BQU0sQ0FBQyxDQUFDLEVBQUVTLFNBQVNTLFVBQVUsQ0FBQyxDQUFDO1lBQUMsR0FDbEY7Z0JBQUVsQixRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNTixPQUFPLE1BQU1lLFNBQVNkLElBQUk7UUFDaEMsTUFBTXdCLGNBQWMxQixVQUFVQyxNQUFNaEIsS0FBSyxDQUFDLEdBQUc7UUFFN0MsSUFBSXlDLFlBQVlsQyxNQUFNLEdBQUcsS0FBSztZQUM1QixPQUFPM0IscURBQVlBLENBQUN1QyxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQStELEdBQ3hGO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxJQUFJLENBQUN2Qyw2REFBaUJBLEVBQUU7WUFDdEIsT0FBT0gscURBQVlBLENBQUN1QyxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQXVDLEdBQ2hFO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxJQUFJb0I7UUFDSixJQUFJO1lBQ0YsTUFBTUMsV0FBVyxNQUFNN0QsMkRBQWVBLENBQUM4RCxJQUFJLENBQUMsYUFBYTtnQkFDdkRDLE9BQU87Z0JBQ1BDLFlBQVk7Z0JBQ1pDLFFBQVEvRDtnQkFDUmdFLFVBQVU7b0JBQ1I7d0JBQ0VDLE1BQU07d0JBQ05DLFNBQVNUO29CQUNYO2lCQUNEO1lBQ0g7WUFFQUMsUUFBUUMsU0FBU3hDLElBQUksRUFBRStDLFNBQVMsQ0FBQyxFQUFFLEVBQUVqQztZQUNyQyxJQUFJLENBQUN5QixPQUFPO2dCQUNWLE9BQU85RCxxREFBWUEsQ0FBQ3VDLElBQUksQ0FDdEI7b0JBQUVDLFNBQVM7b0JBQU9DLE9BQU87Z0JBQWlDLEdBQzFEO29CQUFFQyxRQUFRO2dCQUFJO1lBRWxCO1FBQ0YsRUFBRSxPQUFPZSxLQUFVO1lBQ2pCLE1BQU1jLE1BQU1kLElBQUlNLFFBQVEsRUFBRXhDLE1BQU1rQixPQUFPaUIsV0FBV0QsSUFBSUMsT0FBTyxJQUFJO1lBQ2pFLE9BQU8xRCxxREFBWUEsQ0FBQ3VDLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRThCLElBQUksQ0FBQztZQUFDLEdBQ3JEO2dCQUFFN0IsUUFBUTtZQUFJO1FBRWxCO1FBRUEsSUFBSThCO1FBQ0osSUFBSTtZQUNGLE1BQU1DLFVBQVVYLE1BQU0zQyxPQUFPLENBQUMsZUFBZSxJQUFJQSxPQUFPLENBQUMsV0FBVyxJQUFJRCxJQUFJO1lBQzVFc0QsU0FBU0UsS0FBS0MsS0FBSyxDQUFDRjtRQUN0QixFQUFFLE9BQU07WUFDTixPQUFPekUscURBQVlBLENBQUN1QyxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQXVDLEdBQ2hFO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxJQUFJLENBQUM4QixPQUFPeEQsS0FBSyxJQUFJLENBQUN3RCxPQUFPRixPQUFPLEVBQUU7WUFDcEMsT0FBT3RFLHFEQUFZQSxDQUFDdUMsSUFBSSxDQUN0QjtnQkFBRUMsU0FBUztnQkFBT0MsT0FBTztZQUFpRCxHQUMxRTtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTXBCLFdBQVdQLGFBQWF5RCxPQUFPeEQsS0FBSztRQUMxQyxNQUFNZ0IsT0FBTyxNQUFNWCxjQUFjQztRQUVqQyxNQUFNLEVBQUVDLE1BQU1xRCxXQUFXLEVBQUVuQyxPQUFPb0MsWUFBWSxFQUFFLEdBQUcsTUFBTTVFLG1EQUFRQSxDQUM5RHVCLElBQUksQ0FBQyxZQUNMc0QsTUFBTSxDQUFDO1lBQ045RCxPQUFPd0QsT0FBT3hELEtBQUs7WUFDbkJzRCxTQUFTRSxPQUFPRixPQUFPO1lBQ3ZCdEM7WUFDQVUsUUFBUTtZQUNScUMsWUFBWSxJQUFJQyxPQUFPQyxXQUFXO1lBQ2xDQyxVQUFVVixPQUFPVSxRQUFRLElBQUk7WUFDN0JDLFlBQVl2QztRQUNkLEdBQ0NuQixNQUFNLENBQUMsTUFDUDJELE1BQU07UUFFVCxJQUFJUCxjQUFjO1lBQ2hCLE9BQU83RSxxREFBWUEsQ0FBQ3VDLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7Z0JBQU9DLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRW9DLGFBQWFuQixPQUFPLENBQUMsQ0FBQztZQUFDLEdBQzFFO2dCQUFFaEIsUUFBUTtZQUFJO1FBRWxCO1FBRUEsSUFBSThCLE9BQU9hLGNBQWMsSUFBSWIsT0FBT2EsY0FBYyxDQUFDQyxNQUFNLEVBQUU7WUFDekQsTUFBTSxFQUFFN0MsT0FBTzhDLGFBQWEsRUFBRSxHQUFHLE1BQU10RixtREFBUUEsQ0FDNUN1QixJQUFJLENBQUMsYUFDTHNELE1BQU0sQ0FBQztnQkFDTlEsUUFBUWQsT0FBT2EsY0FBYyxDQUFDQyxNQUFNO2dCQUNwQ3RFLE9BQU93RCxPQUFPYSxjQUFjLENBQUNyRSxLQUFLO2dCQUNsQ3dFLGFBQWFoQixPQUFPYSxjQUFjLENBQUNHLFdBQVc7Z0JBQzlDQyxZQUFZakIsT0FBT2EsY0FBYyxDQUFDSyxJQUFJO2dCQUN0Q1AsWUFBWXZDO2dCQUNaK0MsWUFBWTtZQUNkO1lBRUYsSUFBSUosZUFBZTtnQkFDakJLLFFBQVFuRCxLQUFLLENBQUMsMkJBQTJCOEMsY0FBYzdCLE9BQU87WUFDaEU7UUFDRjtRQUVBLE9BQU8xRCxxREFBWUEsQ0FBQ3VDLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUUjtZQUNBNkQsWUFBWWpCLFlBQVkxQixFQUFFO1FBQzVCO0lBQ0YsRUFBRSxPQUFPTyxLQUFVO1FBQ2pCbUMsUUFBUW5ELEtBQUssQ0FBQyxpQkFBaUJnQjtRQUMvQixPQUFPekQscURBQVlBLENBQUN1QyxJQUFJLENBQ3RCO1lBQUVDLFNBQVM7WUFBT0MsT0FBTztRQUF5QixHQUNsRDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BoZW5vbWVueS1yZXZpZXcvLi9zcmMvYXBwL2FwaS9pbmdlc3Qvcm91dGUudHM/ODJkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gXCJAL2xpYi9zdXBhYmFzZVwiO1xuaW1wb3J0IHsgYW50aHJvcGljQ2xpZW50LCBBTlRIUk9QSUNfQVBJX0tFWSB9IGZyb20gXCJAL2xpYi9hbnRocm9waWNcIjtcblxuY29uc3QgU1lTVEVNX1BST01QVCA9IGBcbllvdSBhcmUgYW4gaW50ZWxsaWdlbmNlIGFuYWx5c2lzIGVuZ2luZS5cblxuUmV3cml0ZSB0aGUgcHJvdmlkZWQgYXJ0aWNsZSBpbnRvIGEgbmV1dHJhbCwgYW5hbHl0aWNhbCBpbnRlbGxpZ2VuY2UgYnJpZWYuXG5cblJlbW92ZSBtYXJrZXRpbmcgdG9uZS5cbk5vIGh5cGUuXG5UZWNobmljYWwgc2lnbmlmaWNhbmNlLlxuR2VvcG9saXRpY2FsIGltcGFjdC5cblxuU2VsZWN0IGNhdGVnb3J5IHN0cmljdGx5IGZyb206XG5cbkFJXG5BSSBHb3Zlcm5hbmNlXG5BSSBPcGVyYXRpb25zXG5RdWFudHVtXG5TcGFjZVxuQmlvdGVjaFxuSW5kaWHigJNDaGluYVxuVVNBIEV1cm9wZVxuSW50ZWxsaWdlbmNlIEJyaWVmXG5cblJldHVybiBTVFJJQ1QgSlNPTiBPTkxZOlxuXG57XG4gIFwidGl0bGVcIjogXCJcIixcbiAgXCJjb250ZW50XCI6IFwiXCIsXG4gIFwic3VtbWFyeVwiOiBcIlwiLFxuICBcImNhdGVnb3J5XCI6IFwiXCIsXG4gIFwidGltZWxpbmVfZXZlbnRcIjoge1xuICAgIFwiZW50aXR5XCI6IFwiXCIsXG4gICAgXCJkYXRlXCI6IFwiXCIsXG4gICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgIFwiZGVzY3JpcHRpb25cIjogXCJcIlxuICB9XG59XG5cbklmIG5vIHRpbWVsaW5lX2V2ZW50IGV4aXN0cywgcmV0dXJuIG51bGwuXG5ObyBtYXJrZG93bi5cbk5vIGNvbW1lbnRhcnkuXG5Pbmx5IHZhbGlkIEpTT04uXG5gO1xuXG5mdW5jdGlvbiBjaGVja0F1dGgocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBib29sZWFuIHtcbiAgY29uc3QgYWRtaW5BdXRoID0gcmVxdWVzdC5jb29raWVzLmdldChcImFkbWluLWF1dGhcIik/LnZhbHVlO1xuICBjb25zdCBhZG1pblNlY3JldCA9IHByb2Nlc3MuZW52LkFETUlOX1NFQ1JFVDtcbiAgcmV0dXJuICEhYWRtaW5TZWNyZXQgJiYgYWRtaW5BdXRoID09PSBhZG1pblNlY3JldDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVTbHVnKHRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gdGl0bGVcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC50cmltKClcbiAgICAucmVwbGFjZSgvW15hLXowLTlcXHMtXS9nLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgIC5yZXBsYWNlKC8tKy9nLCBcIi1cIilcbiAgICAucmVwbGFjZSgvXi18LSQvZywgXCJcIilcbiAgICAuc2xpY2UoMCwgODApO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRVbmlxdWVTbHVnKGJhc2VTbHVnOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oXCJhcnRpY2xlc1wiKVxuICAgIC5zZWxlY3QoXCJzbHVnXCIpXG4gICAgLmxpa2UoXCJzbHVnXCIsIGAke2Jhc2VTbHVnfSVgKTtcblxuICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHJldHVybiBiYXNlU2x1ZztcblxuICBjb25zdCBleGlzdGluZyA9IG5ldyBTZXQoZGF0YS5tYXAoKHJvdzogeyBzbHVnOiBzdHJpbmcgfSkgPT4gcm93LnNsdWcpKTtcbiAgaWYgKCFleGlzdGluZy5oYXMoYmFzZVNsdWcpKSByZXR1cm4gYmFzZVNsdWc7XG5cbiAgbGV0IGNvdW50ZXIgPSAyO1xuICB3aGlsZSAoZXhpc3RpbmcuaGFzKGAke2Jhc2VTbHVnfS0ke2NvdW50ZXJ9YCkpIGNvdW50ZXIrKztcbiAgcmV0dXJuIGAke2Jhc2VTbHVnfS0ke2NvdW50ZXJ9YDtcbn1cblxuZnVuY3Rpb24gc3RyaXBIdG1sKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCB0ZXh0ID0gaHRtbDtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvPHNjcmlwdFtcXHNcXFNdKj88XFwvc2NyaXB0Pi9naSwgXCJcIik7XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxzdHlsZVtcXHNcXFNdKj88XFwvc3R5bGU+L2dpLCBcIlwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvPG5hdltcXHNcXFNdKj88XFwvbmF2Pi9naSwgXCJcIik7XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLzxmb290ZXJbXFxzXFxTXSo/PFxcL2Zvb3Rlcj4vZ2ksIFwiXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88aGVhZGVyW1xcc1xcU10qPzxcXC9oZWFkZXI+L2dpLCBcIlwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvPGFzaWRlW1xcc1xcU10qPzxcXC9hc2lkZT4vZ2ksIFwiXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88aWZyYW1lW1xcc1xcU10qPzxcXC9pZnJhbWU+L2dpLCBcIlwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvPG5vc2NyaXB0W1xcc1xcU10qPzxcXC9ub3NjcmlwdD4vZ2ksIFwiXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC88W14+XSs+L2csIFwiIFwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvJm5ic3A7L2csIFwiIFwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvJmFtcDsvZywgXCImXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8mbHQ7L2csIFwiPFwiKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvJmd0Oy9nLCBcIj5cIik7XG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyZxdW90Oy9nLCAnXCInKTtcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvJiMzOTsvZywgXCInXCIpO1xuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcbiAgcmV0dXJuIHRleHQudHJpbSgpO1xufVxuXG5pbnRlcmZhY2UgQWlSZXN1bHQge1xuICB0aXRsZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHN1bW1hcnk6IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgdGltZWxpbmVfZXZlbnQ6IHtcbiAgICBlbnRpdHk6IHN0cmluZztcbiAgICBkYXRlOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICB9IHwgbnVsbDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBpZiAoIWNoZWNrQXV0aChyZXF1ZXN0KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlVuYXV0aG9yaXplZC5cIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIGxldCBib2R5OiB7IHVybD86IHN0cmluZyB9O1xuICAgIHRyeSB7XG4gICAgICBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiSW52YWxpZCBKU09OIGJvZHkuXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVybCB9ID0gYm9keTtcbiAgICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwidXJsIGlzIHJlcXVpcmVkLlwiIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIG5ldyBVUkwodXJsKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJJbnZhbGlkIFVSTCBmb3JtYXQuXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJhcnRpY2xlc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCB0aXRsZVwiKVxuICAgICAgLmVxKFwic291cmNlX3VybFwiLCB1cmwpXG4gICAgICAubGltaXQoMSk7XG5cbiAgICBpZiAoZXhpc3RpbmcgJiYgZXhpc3RpbmcubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGBBbHJlYWR5IGluZ2VzdGVkOiBcIiR7ZXhpc3RpbmdbMF0udGl0bGV9XCJgLFxuICAgICAgICAgIGR1cGxpY2F0ZTogdHJ1ZSxcbiAgICAgICAgICBleGlzdGluZ19pZDogZXhpc3RpbmdbMF0uaWQsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDkgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgZmV0Y2hSZXM6IFJlc3BvbnNlO1xuICAgIHRyeSB7XG4gICAgICBmZXRjaFJlcyA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJVc2VyLUFnZW50XCI6IFwiTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IFBoZW5vbWVueUJvdC8xLjApXCIsXG4gICAgICAgICAgXCJBY2NlcHRcIjogXCJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCgxNTAwMCksXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEZhaWxlZCB0byBmZXRjaCBVUkw6ICR7ZXJyLm1lc3NhZ2V9YCB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFmZXRjaFJlcy5vaykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYFVSTCByZXR1cm5lZCAke2ZldGNoUmVzLnN0YXR1c30gJHtmZXRjaFJlcy5zdGF0dXNUZXh0fWAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCBmZXRjaFJlcy50ZXh0KCk7XG4gICAgY29uc3QgY2xlYW5lZFRleHQgPSBzdHJpcEh0bWwoaHRtbCkuc2xpY2UoMCwgMTUwMDApO1xuXG4gICAgaWYgKGNsZWFuZWRUZXh0Lmxlbmd0aCA8IDEwMCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJFeHRyYWN0ZWQgdGV4dCB0b28gc2hvcnQg4oCUIHBvc3NpYmx5IHBheXdhbGxlZCBvciBlbXB0eSBwYWdlLlwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MjIgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIUFOVEhST1BJQ19BUElfS0VZKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkFOVEhST1BJQ19BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkLlwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgYWlSYXc6IHN0cmluZztcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhbnRocm9waWNDbGllbnQucG9zdChcIi9tZXNzYWdlc1wiLCB7XG4gICAgICAgIG1vZGVsOiBcImNsYXVkZS1zb25uZXQtNC0yMDI1MDUxNFwiLFxuICAgICAgICBtYXhfdG9rZW5zOiAyMDAwLFxuICAgICAgICBzeXN0ZW06IFNZU1RFTV9QUk9NUFQsXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICBjb250ZW50OiBjbGVhbmVkVGV4dCxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSk7XG5cbiAgICAgIGFpUmF3ID0gcmVzcG9uc2UuZGF0YT8uY29udGVudD8uWzBdPy50ZXh0O1xuICAgICAgaWYgKCFhaVJhdykge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRW1wdHkgcmVzcG9uc2UgZnJvbSBBbnRocm9waWMuXCIgfSxcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgY29uc3QgbXNnID0gZXJyLnJlc3BvbnNlPy5kYXRhPy5lcnJvcj8ubWVzc2FnZSB8fCBlcnIubWVzc2FnZSB8fCBcIlVua25vd24gQW50aHJvcGljIGVycm9yXCI7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgQUkgcmVxdWVzdCBmYWlsZWQ6ICR7bXNnfWAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGxldCBwYXJzZWQ6IEFpUmVzdWx0O1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjbGVhbmVkID0gYWlSYXcucmVwbGFjZSgvYGBganNvblxccyovZywgXCJcIikucmVwbGFjZSgvYGBgXFxzKi9nLCBcIlwiKS50cmltKCk7XG4gICAgICBwYXJzZWQgPSBKU09OLnBhcnNlKGNsZWFuZWQpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJGYWlsZWQgdG8gcGFyc2UgQUkgcmVzcG9uc2UgYXMgSlNPTi5cIiB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJzZWQudGl0bGUgfHwgIXBhcnNlZC5jb250ZW50KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkFJIHJlc3BvbnNlIG1pc3NpbmcgcmVxdWlyZWQgdGl0bGUgb3IgY29udGVudC5cIiB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgYmFzZVNsdWcgPSBnZW5lcmF0ZVNsdWcocGFyc2VkLnRpdGxlKTtcbiAgICBjb25zdCBzbHVnID0gYXdhaXQgZ2V0VW5pcXVlU2x1ZyhiYXNlU2x1Zyk7XG5cbiAgICBjb25zdCB7IGRhdGE6IGFydGljbGVEYXRhLCBlcnJvcjogYXJ0aWNsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJhcnRpY2xlc1wiKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIHRpdGxlOiBwYXJzZWQudGl0bGUsXG4gICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5jb250ZW50LFxuICAgICAgICBzbHVnLFxuICAgICAgICBzdGF0dXM6IFwicHVibGlzaGVkXCIsXG4gICAgICAgIHB1Ymxpc2hfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgY2F0ZWdvcnk6IHBhcnNlZC5jYXRlZ29yeSB8fCBudWxsLFxuICAgICAgICBzb3VyY2VfdXJsOiB1cmwsXG4gICAgICB9KVxuICAgICAgLnNlbGVjdChcImlkXCIpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoYXJ0aWNsZUVycm9yKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBgQXJ0aWNsZSBpbnNlcnQgZmFpbGVkOiAke2FydGljbGVFcnJvci5tZXNzYWdlfWAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChwYXJzZWQudGltZWxpbmVfZXZlbnQgJiYgcGFyc2VkLnRpbWVsaW5lX2V2ZW50LmVudGl0eSkge1xuICAgICAgY29uc3QgeyBlcnJvcjogdGltZWxpbmVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJ0aW1lbGluZXNcIilcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgZW50aXR5OiBwYXJzZWQudGltZWxpbmVfZXZlbnQuZW50aXR5LFxuICAgICAgICAgIHRpdGxlOiBwYXJzZWQudGltZWxpbmVfZXZlbnQudGl0bGUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHBhcnNlZC50aW1lbGluZV9ldmVudC5kZXNjcmlwdGlvbixcbiAgICAgICAgICBldmVudF9kYXRlOiBwYXJzZWQudGltZWxpbmVfZXZlbnQuZGF0ZSxcbiAgICAgICAgICBzb3VyY2VfdXJsOiB1cmwsXG4gICAgICAgICAgY29uZmlkZW5jZTogMC44NSxcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmICh0aW1lbGluZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaW1lbGluZSBpbnNlcnQgZmFpbGVkOlwiLCB0aW1lbGluZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgc2x1ZyxcbiAgICAgIGFydGljbGVfaWQ6IGFydGljbGVEYXRhLmlkLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJJbmdlc3QgZXJyb3I6XCIsIGVycik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yLlwiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic3VwYWJhc2UiLCJhbnRocm9waWNDbGllbnQiLCJBTlRIUk9QSUNfQVBJX0tFWSIsIlNZU1RFTV9QUk9NUFQiLCJjaGVja0F1dGgiLCJyZXF1ZXN0IiwiYWRtaW5BdXRoIiwiY29va2llcyIsImdldCIsInZhbHVlIiwiYWRtaW5TZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiQURNSU5fU0VDUkVUIiwiZ2VuZXJhdGVTbHVnIiwidGl0bGUiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJyZXBsYWNlIiwic2xpY2UiLCJnZXRVbmlxdWVTbHVnIiwiYmFzZVNsdWciLCJkYXRhIiwiZnJvbSIsInNlbGVjdCIsImxpa2UiLCJsZW5ndGgiLCJleGlzdGluZyIsIlNldCIsIm1hcCIsInJvdyIsInNsdWciLCJoYXMiLCJjb3VudGVyIiwic3RyaXBIdG1sIiwiaHRtbCIsInRleHQiLCJQT1NUIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsImJvZHkiLCJ1cmwiLCJVUkwiLCJlcSIsImxpbWl0IiwiZHVwbGljYXRlIiwiZXhpc3RpbmdfaWQiLCJpZCIsImZldGNoUmVzIiwiZmV0Y2giLCJoZWFkZXJzIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJ0aW1lb3V0IiwiZXJyIiwibWVzc2FnZSIsIm9rIiwic3RhdHVzVGV4dCIsImNsZWFuZWRUZXh0IiwiYWlSYXciLCJyZXNwb25zZSIsInBvc3QiLCJtb2RlbCIsIm1heF90b2tlbnMiLCJzeXN0ZW0iLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwibXNnIiwicGFyc2VkIiwiY2xlYW5lZCIsIkpTT04iLCJwYXJzZSIsImFydGljbGVEYXRhIiwiYXJ0aWNsZUVycm9yIiwiaW5zZXJ0IiwicHVibGlzaF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImNhdGVnb3J5Iiwic291cmNlX3VybCIsInNpbmdsZSIsInRpbWVsaW5lX2V2ZW50IiwiZW50aXR5IiwidGltZWxpbmVFcnJvciIsImRlc2NyaXB0aW9uIiwiZXZlbnRfZGF0ZSIsImRhdGUiLCJjb25maWRlbmNlIiwiY29uc29sZSIsImFydGljbGVfaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ingest/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/anthropic.ts":
/*!******************************!*\
  !*** ./src/lib/anthropic.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANTHROPIC_API_KEY: () => (/* binding */ ANTHROPIC_API_KEY),\n/* harmony export */   anthropicClient: () => (/* binding */ anthropicClient)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\nconst ANTHROPIC_API_KEY = process.env.ANTHROPIC_API_KEY;\nconst anthropicClient = axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create({\n    baseURL: \"https://api.anthropic.com/v1\",\n    headers: {\n        \"x-api-key\": ANTHROPIC_API_KEY || \"\",\n        \"anthropic-version\": \"2023-06-01\",\n        \"Content-Type\": \"application/json\"\n    }\n});\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2FudGhyb3BpYy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEI7QUFFMUIsTUFBTUMsb0JBQW9CQyxRQUFRQyxHQUFHLENBQUNGLGlCQUFpQjtBQUV2RCxNQUFNRyxrQkFBa0JKLDZDQUFLQSxDQUFDSyxNQUFNLENBQUM7SUFDbkNDLFNBQVM7SUFDVEMsU0FBUztRQUNQLGFBQWFOLHFCQUFxQjtRQUNsQyxxQkFBcUI7UUFDckIsZ0JBQWdCO0lBQ2xCO0FBQ0Y7QUFFOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9waGVub21lbnktcmV2aWV3Ly4vc3JjL2xpYi9hbnRocm9waWMudHM/ZDA4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XG5cbmNvbnN0IEFOVEhST1BJQ19BUElfS0VZID0gcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVk7XG5cbmNvbnN0IGFudGhyb3BpY0NsaWVudCA9IGF4aW9zLmNyZWF0ZSh7XG4gIGJhc2VVUkw6IFwiaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgXCJ4LWFwaS1rZXlcIjogQU5USFJPUElDX0FQSV9LRVkgfHwgXCJcIixcbiAgICBcImFudGhyb3BpYy12ZXJzaW9uXCI6IFwiMjAyMy0wNi0wMVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmV4cG9ydCB7IGFudGhyb3BpY0NsaWVudCwgQU5USFJPUElDX0FQSV9LRVkgfTtcbiJdLCJuYW1lcyI6WyJheGlvcyIsIkFOVEhST1BJQ19BUElfS0VZIiwicHJvY2VzcyIsImVudiIsImFudGhyb3BpY0NsaWVudCIsImNyZWF0ZSIsImJhc2VVUkwiLCJoZWFkZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/anthropic.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\nconst supabaseUrl = \"https://koiyuurunlamocjlrjbv.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtvaXl1dXJ1bmxhbW9jamxyamJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3Njg2NjYsImV4cCI6MjA4NzM0NDY2Nn0.cJC7cut-gRcK5E0wGUq9ieRCaB8mIYxQyx8qOzxLUl8\";\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXFEO0FBRXJELE1BQU1DLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxrQkFBa0JILGtOQUF5QztBQUUxRCxNQUFNSyxXQUFXUCxtRUFBWUEsQ0FBQ0MsYUFBYUksaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGhlbm9tZW55LXJldmlldy8uL3NyYy9saWIvc3VwYWJhc2UudHM/MDZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMITtcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZITtcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/axios","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/form-data","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/follow-redirects","vendor-chunks/proxy-from-env","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/get-intrinsic","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fingest%2Froute&page=%2Fapi%2Fingest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fingest%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();